{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.useReactiveSharedValue=void 0;var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _react=require(\"react\");var _reactNativeReanimated=require(\"react-native-reanimated\");var useReactiveSharedValue=exports.useReactiveSharedValue=function useReactiveSharedValue(value){var _valueRef$current;var initialValueRef=(0,_react.useRef)(null);var valueRef=(0,_react.useRef)(null);if(value&&typeof value==='object'&&'value'in value){}else if(valueRef.current===null){initialValueRef.current=value;if(typeof value==='object'){valueRef.current=(0,_reactNativeReanimated.makeMutable)((0,_extends2.default)({},value));}else{valueRef.current=(0,_reactNativeReanimated.makeMutable)(value);}}else if(initialValueRef.current!==value){valueRef.current.value=value;}(0,_react.useEffect)(function(){return function(){if(valueRef.current){(0,_reactNativeReanimated.cancelAnimation)(valueRef.current);}};},[]);return(_valueRef$current=valueRef.current)!==null&&_valueRef$current!==void 0?_valueRef$current:value;};","map":{"version":3,"names":["_react","require","_reactNativeReanimated","useReactiveSharedValue","exports","value","_valueRef$current","initialValueRef","useRef","valueRef","current","makeMutable","_extends2","default","useEffect","cancelAnimation"],"sources":["/Users/shayan/workspace/godfather/node_modules/@gorhom/bottom-sheet/lib/module/hooks/useReactiveSharedValue.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport Animated, {\n  cancelAnimation,\n  makeMutable,\n} from 'react-native-reanimated';\nimport type { Primitive } from '../types';\n\nexport const useReactiveSharedValue = <T>(\n  value: T\n): T extends Primitive ? Animated.SharedValue<T> : T => {\n  const initialValueRef = useRef<T>(null);\n  const valueRef = useRef<Animated.SharedValue<T>>(null);\n\n  if (value && typeof value === 'object' && 'value' in value) {\n    /**\n     * if provided value is a shared value,\n     * then we do not initialize another one.\n     */\n  } else if (valueRef.current === null) {\n    // @ts-ignore\n    initialValueRef.current = value;\n    /**\n     * if value is an object, then we need to\n     * pass a clone.\n     */\n    if (typeof value === 'object') {\n      // @ts-ignore\n      valueRef.current = makeMutable({ ...value });\n    } else {\n      // @ts-ignore\n      valueRef.current = makeMutable(value);\n    }\n  } else if (initialValueRef.current !== value) {\n    valueRef.current.value = value as T;\n  }\n\n  useEffect(() => {\n    return () => {\n      if (valueRef.current) {\n        cancelAnimation(valueRef.current);\n      }\n    };\n  }, []);\n\n  // @ts-ignore\n  return valueRef.current ?? value;\n};\n"],"mappings":"kQAAA,IAAAA,MAAA,CAAAC,OAAA,UACA,IAAAC,sBAAA,CAAAD,OAAA,4BAMO,GAAM,CAAAE,sBAAsB,CAAAC,OAAA,CAAAD,sBAAA,CACjC,QADW,CAAAA,sBAAsBA,CACjCE,KADoC,CAEkB,KAAAC,iBAAA,CACtD,GAAM,CAAAC,eAAe,CAAG,GAAAC,aAAM,EAAI,IAAJ,CAA9B,CACA,GAAM,CAAAC,QAAQ,CAAG,GAAAD,aAAM,EAA0B,IAA1B,CAAvB,CAEA,GAAIH,KAAK,EAAI,MAAO,CAAAA,KAAP,GAAiB,QAA1B,EAAsC,SAAW,CAAAA,KAArD,CAA4D,CAK3D,CALD,IAKO,IAAII,QAAQ,CAACC,OAAT,GAAqB,IAAzB,CAA+B,CAEpCH,eAAe,CAACG,OAAhB,CAA0BL,KAA1B,CAKA,GAAI,MAAO,CAAAA,KAAP,GAAiB,QAArB,CAA+B,CAE7BI,QAAQ,CAACC,OAAT,CAAmB,GAAAC,kCAAW,KAAAC,SAAA,CAAAC,OAAA,KAAMR,KAAA,CAAN,CAA9B,CACD,CAHD,IAGO,CAELI,QAAQ,CAACC,OAAT,CAAmB,GAAAC,kCAAW,EAACN,KAAD,CAA9B,CACD,CACF,CAdM,IAcA,IAAIE,eAAe,CAACG,OAAhB,GAA4BL,KAAhC,CAAuC,CAC5CI,QAAQ,CAACC,OAAT,CAAiBL,KAAjB,CAAyBA,KAAzB,CACD,CAED,GAAAS,gBAAS,EAAC,UAAM,CACd,MAAO,WAAM,CACX,GAAIL,QAAQ,CAACC,OAAb,CAAsB,CACpB,GAAAK,sCAAe,EAACN,QAAQ,CAACC,OAAV,CAAf,CACD,CACF,CAJD,CAKD,CANQ,CAMN,EANM,CAAT,CASA,OAAAJ,iBAAA,CAAOG,QAAQ,CAACC,OAAhB,UAAAJ,iBAAA,UAAAA,iBAAA,CAA2BD,KAA3B,CACD,CAvCM"},"metadata":{},"sourceType":"script","externalDependencies":[]}