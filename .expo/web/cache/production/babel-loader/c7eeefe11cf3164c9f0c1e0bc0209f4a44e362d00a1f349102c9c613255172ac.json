{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=createAnimatedComponent;var _extends3=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _assertThisInitialized2=_interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _slicedToArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));var _react=_interopRequireDefault(require(\"react\"));var _reactNative=require(\"react-native\");var _WorkletEventHandler=_interopRequireDefault(require(\"../reanimated2/WorkletEventHandler\"));var _setAndForwardRef=_interopRequireDefault(require(\"./setAndForwardRef\"));require(\"../reanimated2/layoutReanimation/animationsManager\");var _invariant=_interopRequireDefault(require(\"invariant\"));var _ConfigHelper=require(\"../ConfigHelper\");var _RNRenderer=require(\"../reanimated2/platform-specific/RNRenderer\");var _core=require(\"../reanimated2/core\");var _PlatformChecker=require(\"../reanimated2/PlatformChecker\");var _animation=require(\"../reanimated2/animation\");var _layoutReanimation=require(\"../reanimated2/layoutReanimation\");var _ViewDescriptorsSet=require(\"../reanimated2/ViewDescriptorsSet\");var _fabricUtils=require(\"../reanimated2/fabricUtils\");var _UpdateProps=_interopRequireDefault(require(\"../reanimated2/UpdateProps\"));var _NativeReanimated=_interopRequireDefault(require(\"../reanimated2/NativeReanimated\"));var _utils=require(\"../reanimated2/utils\");var _PropsRegistry=require(\"../reanimated2/PropsRegistry\");var _JSPropUpdater=require(\"./JSPropUpdater\");var _util=require(\"../reanimated2/animation/util\");var _animationBuilder=require(\"../animationBuilder\");var _utils2=require(\"./utils\");function _createForOfIteratorHelperLoose(o,allowArrayLike){var it=typeof Symbol!==\"undefined\"&&o[Symbol.iterator]||o[\"@@iterator\"];if(it)return(it=it.call(o)).next.bind(it);if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length===\"number\"){if(it)o=it;var i=0;return function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};};}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _extends(){_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,\"string\");return typeof key===\"symbol\"?key:String(key);}function _toPrimitive(input,hint){if(typeof input!==\"object\"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||\"default\");if(typeof res!==\"object\")return res;throw new TypeError(\"@@toPrimitive must return a primitive value.\");}return(hint===\"string\"?String:Number)(input);}var IS_WEB=(0,_PlatformChecker.isWeb)();function dummyListener(){}function onlyAnimatedStyles(styles){return styles.filter(function(style){return style===null||style===void 0?void 0:style.viewDescriptors;});}function isSameAnimatedStyle(style1,style2){return(style1===null||style1===void 0?void 0:style1.viewsRef)===(style2===null||style2===void 0?void 0:style2.viewsRef);}var isSameAnimatedProps=isSameAnimatedStyle;function isInlineStyleTransform(transform){if(!transform){return false;}return transform.some(function(t){return hasInlineStyles(t);});}function hasInlineStyles(style){if(!style){return false;}return Object.keys(style).some(function(key){var styleValue=style[key];return(0,_utils.isSharedValue)(styleValue)||key==='transform'&&isInlineStyleTransform(styleValue);});}function extractSharedValuesMapFromProps(props){var inlineProps={};for(var key in props){var value=props[key];if(key==='style'){var _props$style;var styles=(0,_utils2.flattenArray)((_props$style=props.style)!=null?_props$style:[]);styles.forEach(function(style){if(!style){return;}for(var _i=0,_Object$entries=Object.entries(style);_i<_Object$entries.length;_i++){var _ref3=_Object$entries[_i];var _ref4=(0,_slicedToArray2.default)(_ref3,2);var _key=_ref4[0];var styleValue=_ref4[1];if((0,_utils.isSharedValue)(styleValue)){inlineProps[_key]=styleValue;}else if(_key==='transform'&&isInlineStyleTransform(styleValue)){inlineProps[_key]=styleValue;}}});}else if((0,_utils.isSharedValue)(value)){inlineProps[key]=value;}}return inlineProps;}function inlinePropsHasChanged(styles1,styles2){if(Object.keys(styles1).length!==Object.keys(styles2).length){return true;}for(var _i2=0,_Object$keys=Object.keys(styles1);_i2<_Object$keys.length;_i2++){var key=_Object$keys[_i2];if(styles1[key]!==styles2[key])return true;}return false;}var _worklet_7960676920272_init_data={code:\"function getInlinePropsUpdate(inlineProps){const getInlinePropsUpdate=this._recur;const{isSharedValue}=this.__closure;const update={};for(const[key,styleValue]of Object.entries(inlineProps)){if(key==='transform'){update[key]=styleValue.map(function(transform){return getInlinePropsUpdate(transform);});}else if(isSharedValue(styleValue)){update[key]=styleValue.value;}else{update[key]=styleValue;}}return update;}\"};var getInlinePropsUpdate=function(){var getInlinePropsUpdate=function getInlinePropsUpdate(inlineProps){var update={};for(var _i3=0,_Object$entries2=Object.entries(inlineProps);_i3<_Object$entries2.length;_i3++){var _ref5=_Object$entries2[_i3];var _ref6=(0,_slicedToArray2.default)(_ref5,2);var key=_ref6[0];var styleValue=_ref6[1];if(key==='transform'){update[key]=styleValue.map(function(transform){return getInlinePropsUpdate(transform);});}else if((0,_utils.isSharedValue)(styleValue)){update[key]=styleValue.value;}else{update[key]=styleValue;}}return update;};getInlinePropsUpdate.__closure={isSharedValue:_utils.isSharedValue};getInlinePropsUpdate.__initData=_worklet_7960676920272_init_data;getInlinePropsUpdate.__workletHash=7960676920272;return getInlinePropsUpdate;}();var _worklet_6705587923381_init_data={code:\"function anonymous(){const{getInlinePropsUpdate,newInlineProps,updateProps,sharableViewDescriptors,maybeViewRef}=this.__closure;const update=getInlinePropsUpdate(newInlineProps);updateProps(sharableViewDescriptors,update,maybeViewRef);}\"};function createAnimatedComponent(Component,options){(0,_invariant.default)(typeof Component!=='function'||Component.prototype&&Component.prototype.isReactComponent,\"Looks like you're passing a function component `\"+Component.name+\"` to `createAnimatedComponent` function which supports only class components. Please wrap your function component with `React.forwardRef()` or use a class component instead.\");var AnimatedComponent=function(_React$Component){(0,_inherits2.default)(AnimatedComponent,_React$Component);var _super=_createSuper(AnimatedComponent);function AnimatedComponent(props){var _this;(0,_classCallCheck2.default)(this,AnimatedComponent);_this=_super.call(this,props);_defineProperty((0,_assertThisInitialized2.default)(_this),\"_styles\",null);_defineProperty((0,_assertThisInitialized2.default)(_this),\"_animatedProps\",void 0);_defineProperty((0,_assertThisInitialized2.default)(_this),\"_viewTag\",-1);_defineProperty((0,_assertThisInitialized2.default)(_this),\"_isFirstRender\",true);_defineProperty((0,_assertThisInitialized2.default)(_this),\"animatedStyle\",{value:{}});_defineProperty((0,_assertThisInitialized2.default)(_this),\"initialStyle\",{});_defineProperty((0,_assertThisInitialized2.default)(_this),\"_component\",null);_defineProperty((0,_assertThisInitialized2.default)(_this),\"_inlinePropsViewDescriptors\",null);_defineProperty((0,_assertThisInitialized2.default)(_this),\"_inlinePropsMapperId\",null);_defineProperty((0,_assertThisInitialized2.default)(_this),\"_inlineProps\",{});_defineProperty((0,_assertThisInitialized2.default)(_this),\"_sharedElementTransition\",null);_defineProperty((0,_assertThisInitialized2.default)(_this),\"_JSPropUpdater\",new _JSPropUpdater.JSPropUpdater());_defineProperty((0,_assertThisInitialized2.default)(_this),\"_setComponentRef\",(0,_setAndForwardRef.default)({getForwardedRef:function getForwardedRef(){return _this.props.forwardedRef;},setLocalRef:function setLocalRef(ref){var tag=IS_WEB?ref:(0,_reactNative.findNodeHandle)(ref);var _this$props3=_this.props,layout=_this$props3.layout,entering=_this$props3.entering,exiting=_this$props3.exiting,sharedTransitionTag=_this$props3.sharedTransitionTag;if((layout||entering||exiting||sharedTransitionTag)&&tag!=null){if(!(0,_PlatformChecker.shouldBeUseWeb)()){(0,_core.enableLayoutAnimations)(true,false);}if(layout){(0,_core.configureLayoutAnimations)(tag,_layoutReanimation.LayoutAnimationType.LAYOUT,(0,_animationBuilder.maybeBuild)(layout,undefined,AnimatedComponent.displayName));}if(entering){var _this$props;(0,_core.configureLayoutAnimations)(tag,_layoutReanimation.LayoutAnimationType.ENTERING,(0,_animationBuilder.maybeBuild)(entering,(_this$props=_this.props)===null||_this$props===void 0?void 0:_this$props.style,AnimatedComponent.displayName));}if(exiting){var reduceMotionInExiting='getReduceMotion'in exiting&&typeof exiting.getReduceMotion==='function'?(0,_util.getReduceMotionFromConfig)(exiting.getReduceMotion()):(0,_util.getReduceMotionFromConfig)();if(!reduceMotionInExiting){var _this$props2;(0,_core.configureLayoutAnimations)(tag,_layoutReanimation.LayoutAnimationType.EXITING,(0,_animationBuilder.maybeBuild)(exiting,(_this$props2=_this.props)===null||_this$props2===void 0?void 0:_this$props2.style,AnimatedComponent.displayName));}}if(sharedTransitionTag&&!IS_WEB){var _this$props$sharedTra;var sharedElementTransition=(_this$props$sharedTra=_this.props.sharedTransitionStyle)!=null?_this$props$sharedTra:new _layoutReanimation.SharedTransition();var reduceMotionInTransition=(0,_util.getReduceMotionFromConfig)(sharedElementTransition.getReduceMotion());if(!reduceMotionInTransition){sharedElementTransition.registerTransition(tag,sharedTransitionTag);_this._sharedElementTransition=sharedElementTransition;}}}if(ref!==_this._component){_this._component=ref;}}}));if((0,_PlatformChecker.isJest)()){_this.animatedStyle={value:{}};}return _this;}(0,_createClass2.default)(AnimatedComponent,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){var _this$_sharedElementT;this._detachNativeEvents();this._JSPropUpdater.removeOnJSPropsChangeListener(this);this._detachStyles();this._detachInlineProps();(_this$_sharedElementT=this._sharedElementTransition)===null||_this$_sharedElementT===void 0?void 0:_this$_sharedElementT.unregisterTransition(this._viewTag);}},{key:\"componentDidMount\",value:function componentDidMount(){this._attachNativeEvents();this._JSPropUpdater.addOnJSPropsChangeListener(this);this._attachAnimatedStyles();this._attachInlineProps();}},{key:\"_getEventViewRef\",value:function _getEventViewRef(){var _this$_component,_getScrollableNode,_ref;return(_this$_component=this._component)!==null&&_this$_component!==void 0&&_this$_component.getScrollableNode?(_getScrollableNode=(_ref=this._component).getScrollableNode)===null||_getScrollableNode===void 0?void 0:_getScrollableNode.call(_ref):this._component;}},{key:\"_attachNativeEvents\",value:function _attachNativeEvents(){var node=this._getEventViewRef();var viewTag=null;for(var key in this.props){var prop=this.props[key];if((0,_utils2.has)('current',prop)&&prop.current instanceof _WorkletEventHandler.default){if(viewTag===null){viewTag=(0,_reactNative.findNodeHandle)(options!==null&&options!==void 0&&options.setNativeProps?this:node);}prop.current.registerForEvents(viewTag,key);}}}},{key:\"_detachNativeEvents\",value:function _detachNativeEvents(){for(var key in this.props){var prop=this.props[key];if((0,_utils2.has)('current',prop)&&prop.current instanceof _WorkletEventHandler.default){prop.current.unregisterFromEvents();}}}},{key:\"_detachStyles\",value:function _detachStyles(){if(IS_WEB&&this._styles!==null){for(var _iterator=_createForOfIteratorHelperLoose(this._styles),_step;!(_step=_iterator()).done;){var style=_step.value;if(style!==null&&style!==void 0&&style.viewsRef){style.viewsRef.remove(this);}}}else if(this._viewTag!==-1&&this._styles!==null){var _this$props$animatedP;for(var _iterator2=_createForOfIteratorHelperLoose(this._styles),_step2;!(_step2=_iterator2()).done;){var _style=_step2.value;_style.viewDescriptors.remove(this._viewTag);}if((_this$props$animatedP=this.props.animatedProps)!==null&&_this$props$animatedP!==void 0&&_this$props$animatedP.viewDescriptors){this.props.animatedProps.viewDescriptors.remove(this._viewTag);}if(global._IS_FABRIC){(0,_PropsRegistry.removeFromPropsRegistry)(this._viewTag);}}}},{key:\"_reattachNativeEvents\",value:function _reattachNativeEvents(prevProps){for(var key in prevProps){var prop=this.props[key];if((0,_utils2.has)('current',prop)&&prop.current instanceof _WorkletEventHandler.default&&prop.current.reattachNeeded){prop.current.unregisterFromEvents();}}var viewTag=null;for(var _key2 in this.props){var _prop=this.props[_key2];if((0,_utils2.has)('current',_prop)&&_prop.current instanceof _WorkletEventHandler.default&&_prop.current.reattachNeeded){if(viewTag===null){var node=this._getEventViewRef();viewTag=(0,_reactNative.findNodeHandle)(options!==null&&options!==void 0&&options.setNativeProps?this:node);}_prop.current.registerForEvents(viewTag,_key2);_prop.current.reattachNeeded=false;}}}},{key:\"_updateFromNative\",value:function _updateFromNative(props){if(options!==null&&options!==void 0&&options.setNativeProps){options.setNativeProps(this._component,props);}else{var _this$_component2,_this$_component2$set;(_this$_component2=this._component)===null||_this$_component2===void 0?void 0:(_this$_component2$set=_this$_component2.setNativeProps)===null||_this$_component2$set===void 0?void 0:_this$_component2$set.call(_this$_component2,props);}}},{key:\"_getViewInfo\",value:function _getViewInfo(){var _this$_component3,_getAnimatableRef,_ref2;var viewTag;var viewName;var shadowNodeWrapper=null;var viewConfig;var component=(_this$_component3=this._component)!==null&&_this$_component3!==void 0&&_this$_component3.getAnimatableRef?(_getAnimatableRef=(_ref2=this._component).getAnimatableRef)===null||_getAnimatableRef===void 0?void 0:_getAnimatableRef.call(_ref2):this;if(IS_WEB){viewTag=this._component;viewName=null;shadowNodeWrapper=null;viewConfig=null;}else{var _hostInstance$viewCon;var hostInstance=_RNRenderer.RNRenderer.findHostInstance_DEPRECATED(component);if(!hostInstance){throw new Error('[Reanimated] Cannot find host instance for this component. Maybe it renders nothing?');}viewTag=hostInstance===null||hostInstance===void 0?void 0:hostInstance._nativeTag;viewName=hostInstance===null||hostInstance===void 0?void 0:(_hostInstance$viewCon=hostInstance.viewConfig)===null||_hostInstance$viewCon===void 0?void 0:_hostInstance$viewCon.uiViewClassName;viewConfig=hostInstance===null||hostInstance===void 0?void 0:hostInstance.viewConfig;if(global._IS_FABRIC){shadowNodeWrapper=(0,_fabricUtils.getShadowNodeWrapperFromRef)(this);}}return{viewTag:viewTag,viewName:viewName,shadowNodeWrapper:shadowNodeWrapper,viewConfig:viewConfig};}},{key:\"_attachAnimatedStyles\",value:function _attachAnimatedStyles(){var _this2=this;var _this$props$animatedP2,_this$props$animatedP3;var styles=this.props.style?onlyAnimatedStyles((0,_utils2.flattenArray)(this.props.style)):[];var prevStyles=this._styles;this._styles=styles;var prevAnimatedProps=this._animatedProps;this._animatedProps=this.props.animatedProps;var _this$_getViewInfo=this._getViewInfo(),viewTag=_this$_getViewInfo.viewTag,viewName=_this$_getViewInfo.viewName,shadowNodeWrapper=_this$_getViewInfo.shadowNodeWrapper,viewConfig=_this$_getViewInfo.viewConfig;var hasReanimated2Props=((_this$props$animatedP2=this.props.animatedProps)===null||_this$props$animatedP2===void 0?void 0:_this$props$animatedP2.viewDescriptors)||styles.length;if(hasReanimated2Props&&viewConfig){(0,_ConfigHelper.adaptViewConfig)(viewConfig);}this._viewTag=viewTag;if(prevStyles){var hasOneSameStyle=styles.length===1&&prevStyles.length===1&&isSameAnimatedStyle(styles[0],prevStyles[0]);if(!hasOneSameStyle){var _loop=function _loop(prevStyle){var isPresent=styles.some(function(style){return isSameAnimatedStyle(style,prevStyle);});if(!isPresent){prevStyle.viewDescriptors.remove(viewTag);}};for(var _iterator3=_createForOfIteratorHelperLoose(prevStyles),_step3;!(_step3=_iterator3()).done;){var prevStyle=_step3.value;_loop(prevStyle);}}}styles.forEach(function(style){style.viewDescriptors.add({tag:viewTag,name:viewName,shadowNodeWrapper:shadowNodeWrapper});if((0,_PlatformChecker.isJest)()){_this2.animatedStyle.value=(0,_extends3.default)({},_this2.animatedStyle.value,style.initial.value);style.animatedStyle.current=_this2.animatedStyle;}});if(prevAnimatedProps&&!isSameAnimatedProps(prevAnimatedProps,this.props.animatedProps)){prevAnimatedProps.viewDescriptors.remove(viewTag);}if((_this$props$animatedP3=this.props.animatedProps)!==null&&_this$props$animatedP3!==void 0&&_this$props$animatedP3.viewDescriptors){this.props.animatedProps.viewDescriptors.add({tag:viewTag,name:viewName,shadowNodeWrapper:shadowNodeWrapper});}}},{key:\"_attachInlineProps\",value:function _attachInlineProps(){var newInlineProps=extractSharedValuesMapFromProps(this.props);var hasChanged=inlinePropsHasChanged(newInlineProps,this._inlineProps);if(hasChanged){if(!this._inlinePropsViewDescriptors){this._inlinePropsViewDescriptors=(0,_ViewDescriptorsSet.makeViewDescriptorsSet)();var _this$_getViewInfo2=this._getViewInfo(),viewTag=_this$_getViewInfo2.viewTag,viewName=_this$_getViewInfo2.viewName,shadowNodeWrapper=_this$_getViewInfo2.shadowNodeWrapper,viewConfig=_this$_getViewInfo2.viewConfig;if(Object.keys(newInlineProps).length&&viewConfig){(0,_ConfigHelper.adaptViewConfig)(viewConfig);}this._inlinePropsViewDescriptors.add({tag:viewTag,name:viewName,shadowNodeWrapper:shadowNodeWrapper});}var sharableViewDescriptors=this._inlinePropsViewDescriptors.sharableViewDescriptors;var maybeViewRef=_NativeReanimated.default.native?undefined:{items:new Set([this])};var updaterFunction=function(){var anonymous=function anonymous(){var update=getInlinePropsUpdate(newInlineProps);(0,_UpdateProps.default)(sharableViewDescriptors,update,maybeViewRef);};anonymous.__closure={getInlinePropsUpdate:getInlinePropsUpdate,newInlineProps:newInlineProps,updateProps:_UpdateProps.default,sharableViewDescriptors:sharableViewDescriptors,maybeViewRef:maybeViewRef};anonymous.__initData=_worklet_6705587923381_init_data;anonymous.__workletHash=6705587923381;return anonymous;}();this._inlineProps=newInlineProps;if(this._inlinePropsMapperId){(0,_core.stopMapper)(this._inlinePropsMapperId);}this._inlinePropsMapperId=null;if(Object.keys(newInlineProps).length){this._inlinePropsMapperId=(0,_core.startMapper)(updaterFunction,Object.values(newInlineProps));}}}},{key:\"_detachInlineProps\",value:function _detachInlineProps(){if(this._inlinePropsMapperId){(0,_core.stopMapper)(this._inlinePropsMapperId);}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){this._reattachNativeEvents(prevProps);this._attachAnimatedStyles();this._attachInlineProps();}},{key:\"_filterNonAnimatedProps\",value:function _filterNonAnimatedProps(inputProps){var _this3=this;var props={};var _loop2=function _loop2(){var value=inputProps[key];if(key==='style'){var styleProp=inputProps.style;var styles=(0,_utils2.flattenArray)(styleProp!=null?styleProp:[]);var processedStyle=styles.map(function(style){if(style&&style.viewDescriptors){style.viewsRef.add(_this3);if(_this3._isFirstRender){_this3.initialStyle=(0,_extends3.default)({},style.initial.value,_this3.initialStyle,(0,_animation.initialUpdaterRun)(style.initial.updater));}return _this3.initialStyle;}else if(hasInlineStyles(style)){if(_this3._isFirstRender){return getInlinePropsUpdate(style);}var newStyle={};for(var _i4=0,_Object$entries3=Object.entries(style);_i4<_Object$entries3.length;_i4++){var _ref7=_Object$entries3[_i4];var _ref8=(0,_slicedToArray2.default)(_ref7,2);var _key3=_ref8[0];var styleValue=_ref8[1];if(!(0,_utils.isSharedValue)(styleValue)&&!(_key3==='transform'&&isInlineStyleTransform(styleValue))){newStyle[_key3]=styleValue;}}return newStyle;}else{return style;}});props[key]=_reactNative.StyleSheet.flatten(processedStyle);}else if(key==='animatedProps'){var animatedProp=inputProps.animatedProps;if(animatedProp.initial!==undefined){Object.keys(animatedProp.initial.value).forEach(function(key){var _animatedProp$initial,_animatedProp$viewsRe;props[key]=(_animatedProp$initial=animatedProp.initial)===null||_animatedProp$initial===void 0?void 0:_animatedProp$initial.value[key];(_animatedProp$viewsRe=animatedProp.viewsRef)===null||_animatedProp$viewsRe===void 0?void 0:_animatedProp$viewsRe.add(_this3);});}}else if((0,_utils2.has)('current',value)&&value.current instanceof _WorkletEventHandler.default){if(value.current.eventNames.length>0){value.current.eventNames.forEach(function(eventName){props[eventName]=(0,_utils2.has)('listeners',value.current)?value.current.listeners[eventName]:dummyListener;});}else{props[key]=dummyListener;}}else if((0,_utils.isSharedValue)(value)){if(_this3._isFirstRender){props[key]=value.value;}}else if(key!=='onGestureHandlerStateChange'||!(0,_PlatformChecker.isChromeDebugger)()){props[key]=value;}};for(var key in inputProps){_loop2();}return props;}},{key:\"render\",value:function render(){var props=this._filterNonAnimatedProps(this.props);if((0,_PlatformChecker.isJest)()){props.animatedStyle=this.animatedStyle;}if(this._isFirstRender){this._isFirstRender=false;}var platformProps=_reactNative.Platform.select({web:{},default:{collapsable:false}});return _react.default.createElement(Component,_extends({},props,{ref:this._setComponentRef},platformProps));}}]);return AnimatedComponent;}(_react.default.Component);_defineProperty(AnimatedComponent,\"displayName\",void 0);AnimatedComponent.displayName=\"AnimatedComponent(\"+(Component.displayName||Component.name||'Component')+\")\";return _react.default.forwardRef(function(props,ref){return _react.default.createElement(AnimatedComponent,_extends({},props,ref===null?null:{forwardedRef:ref}));});}","map":{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_WorkletEventHandler","_setAndForwardRef","_invariant","_ConfigHelper","_RNRenderer","_core","_PlatformChecker","_animation","_layoutReanimation","_ViewDescriptorsSet","_fabricUtils","_UpdateProps","_NativeReanimated","_utils","_PropsRegistry","_JSPropUpdater","_util","_animationBuilder","_utils2","_createForOfIteratorHelperLoose","o","allowArrayLike","it","Symbol","iterator","call","next","bind","Array","isArray","_unsupportedIterableToArray","length","i","done","value","TypeError","minLen","_arrayLikeToArray","n","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","default","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn2","t","Boolean","valueOf","IS_WEB","isWeb","dummyListener","onlyAnimatedStyles","styles","filter","style","viewDescriptors","isSameAnimatedStyle","style1","style2","viewsRef","isSameAnimatedProps","isInlineStyleTransform","transform","some","hasInlineStyles","keys","key","styleValue","isSharedValue","extractSharedValuesMapFromProps","props","inlineProps","_props$style","flattenArray","forEach","_i","_Object$entries","entries","_ref3","_ref4","_slicedToArray2","inlinePropsHasChanged","styles1","styles2","_i2","_Object$keys","_worklet_7960676920272_init_data","code","getInlinePropsUpdate","update","_i3","_Object$entries2","_ref5","_ref6","map","__closure","__initData","__workletHash","_worklet_6705587923381_init_data","createAnimatedComponent","Component","options","invariant","isReactComponent","AnimatedComponent","_React$Component","_inherits2","_super","_this","_classCallCheck2","_defineProperty","_assertThisInitialized2","JSPropUpdater","setAndForwardRef","getForwardedRef","forwardedRef","setLocalRef","ref","tag","findNodeHandle","_this$props3","layout","entering","exiting","sharedTransitionTag","shouldBeUseWeb","enableLayoutAnimations","configureLayoutAnimations","LayoutAnimationType","LAYOUT","maybeBuild","undefined","displayName","_this$props","ENTERING","reduceMotionInExiting","getReduceMotion","getReduceMotionFromConfig","_this$props2","EXITING","_this$props$sharedTra","sharedElementTransition","sharedTransitionStyle","SharedTransition","reduceMotionInTransition","registerTransition","_sharedElementTransition","_component","isJest","animatedStyle","_createClass2","componentWillUnmount","_this$_sharedElementT","_detachNativeEvents","removeOnJSPropsChangeListener","_detachStyles","_detachInlineProps","unregisterTransition","_viewTag","componentDidMount","_attachNativeEvents","addOnJSPropsChangeListener","_attachAnimatedStyles","_attachInlineProps","_getEventViewRef","_this$_component","_getScrollableNode","_ref","getScrollableNode","node","viewTag","prop","has","current","WorkletEventHandler","setNativeProps","registerForEvents","unregisterFromEvents","_styles","_iterator","_step","remove","_this$props$animatedP","_iterator2","_step2","animatedProps","global","_IS_FABRIC","removeFromPropsRegistry","_reattachNativeEvents","prevProps","reattachNeeded","_updateFromNative","_this$_component2","_this$_component2$set","_getViewInfo","_this$_component3","_getAnimatableRef","_ref2","viewName","shadowNodeWrapper","viewConfig","component","getAnimatableRef","_hostInstance$viewCon","hostInstance","RNRenderer","findHostInstance_DEPRECATED","Error","_nativeTag","uiViewClassName","getShadowNodeWrapperFromRef","_this2","_this$props$animatedP2","_this$props$animatedP3","prevStyles","prevAnimatedProps","_animatedProps","_this$_getViewInfo","hasReanimated2Props","adaptViewConfig","hasOneSameStyle","_loop","prevStyle","isPresent","_iterator3","_step3","add","_extends3","initial","newInlineProps","hasChanged","_inlineProps","_inlinePropsViewDescriptors","makeViewDescriptorsSet","_this$_getViewInfo2","sharableViewDescriptors","maybeViewRef","NativeReanimatedModule","native","items","Set","updaterFunction","anonymous","updateProps","_inlinePropsMapperId","stopMapper","startMapper","values","componentDidUpdate","_filterNonAnimatedProps","inputProps","_this3","_loop2","styleProp","processedStyle","_isFirstRender","initialStyle","initialUpdaterRun","updater","newStyle","_i4","_Object$entries3","_ref7","_ref8","StyleSheet","flatten","animatedProp","_animatedProp$initial","_animatedProp$viewsRe","eventNames","eventName","listeners","isChromeDebugger","render","platformProps","Platform","select","web","collapsable","React","createElement","_extends","_setComponentRef","forwardRef"],"sources":["/Users/shayan/workspace/godfather/node_modules/react-native-reanimated/lib/module/createAnimatedComponent/createAnimatedComponent.tsx"],"sourcesContent":["import type {\n  Component,\n  ComponentClass,\n  ComponentType,\n  FunctionComponent,\n  MutableRefObject,\n  Ref,\n} from 'react';\nimport React from 'react';\nimport { findNodeHandle, Platform, StyleSheet } from 'react-native';\nimport WorkletEventHandler from '../reanimated2/WorkletEventHandler';\nimport setAndForwardRef from './setAndForwardRef';\nimport '../reanimated2/layoutReanimation/animationsManager';\nimport invariant from 'invariant';\nimport { adaptViewConfig } from '../ConfigHelper';\nimport { RNRenderer } from '../reanimated2/platform-specific/RNRenderer';\nimport {\n  configureLayoutAnimations,\n  enableLayoutAnimations,\n  startMapper,\n  stopMapper,\n} from '../reanimated2/core';\nimport {\n  isJest,\n  isChromeDebugger,\n  shouldBeUseWeb,\n  isWeb,\n} from '../reanimated2/PlatformChecker';\nimport { initialUpdaterRun } from '../reanimated2/animation';\nimport {\n  SharedTransition,\n  LayoutAnimationType,\n} from '../reanimated2/layoutReanimation';\nimport type {\n  SharedValue,\n  StyleProps,\n  ShadowNodeWrapper,\n} from '../reanimated2/commonTypes';\nimport type {\n  ViewDescriptorsSet,\n  ViewRefSet,\n} from '../reanimated2/ViewDescriptorsSet';\nimport { makeViewDescriptorsSet } from '../reanimated2/ViewDescriptorsSet';\nimport { getShadowNodeWrapperFromRef } from '../reanimated2/fabricUtils';\nimport updateProps from '../reanimated2/UpdateProps';\nimport NativeReanimatedModule from '../reanimated2/NativeReanimated';\nimport { isSharedValue } from '../reanimated2/utils';\nimport type { AnimateProps } from '../reanimated2/helperTypes';\nimport { removeFromPropsRegistry } from '../reanimated2/PropsRegistry';\nimport { JSPropUpdater } from './JSPropUpdater';\nimport { getReduceMotionFromConfig } from '../reanimated2/animation/util';\nimport { maybeBuild } from '../animationBuilder';\nimport type { AnimatedComponentProps, AnimatedProps } from './utils';\nimport { flattenArray, has } from './utils';\n\nconst IS_WEB = isWeb();\n\nfunction dummyListener() {\n  // empty listener we use to assign to listener properties for which animated\n  // event is used.\n}\n\nfunction onlyAnimatedStyles(styles: StyleProps[]) {\n  return styles.filter((style) => style?.viewDescriptors);\n}\n\nfunction isSameAnimatedStyle(\n  style1?: StyleProps,\n  style2?: StyleProps\n): boolean {\n  // We cannot use equality check to compare useAnimatedStyle outputs directly.\n  // Instead, we can compare its viewsRefs.\n  return style1?.viewsRef === style2?.viewsRef;\n}\n\nconst isSameAnimatedProps = isSameAnimatedStyle;\n\nfunction isInlineStyleTransform(transform: any): boolean {\n  if (!transform) {\n    return false;\n  }\n  return transform.some((t: Record<string, any>) => hasInlineStyles(t));\n}\n\nfunction hasInlineStyles(style: StyleProps): boolean {\n  if (!style) {\n    return false;\n  }\n  return Object.keys(style).some((key) => {\n    const styleValue = style[key];\n    return (\n      isSharedValue(styleValue) ||\n      (key === 'transform' && isInlineStyleTransform(styleValue))\n    );\n  });\n}\n\nfunction extractSharedValuesMapFromProps(\n  props: AnimatedComponentProps<InitialComponentProps>\n): Record<string, any> {\n  const inlineProps: Record<string, any> = {};\n\n  for (const key in props) {\n    const value = props[key];\n    if (key === 'style') {\n      const styles = flattenArray<StyleProps>(props.style ?? []);\n      styles.forEach((style) => {\n        if (!style) {\n          return;\n        }\n        for (const [key, styleValue] of Object.entries(style)) {\n          if (isSharedValue(styleValue)) {\n            inlineProps[key] = styleValue;\n          } else if (\n            key === 'transform' &&\n            isInlineStyleTransform(styleValue)\n          ) {\n            inlineProps[key] = styleValue;\n          }\n        }\n      });\n    } else if (isSharedValue(value)) {\n      inlineProps[key] = value;\n    }\n  }\n\n  return inlineProps;\n}\n\nfunction inlinePropsHasChanged(styles1: StyleProps, styles2: StyleProps) {\n  if (Object.keys(styles1).length !== Object.keys(styles2).length) {\n    return true;\n  }\n\n  for (const key of Object.keys(styles1)) {\n    if (styles1[key] !== styles2[key]) return true;\n  }\n\n  return false;\n}\n\nfunction getInlinePropsUpdate(inlineProps: Record<string, any>) {\n  'worklet';\n  const update: Record<string, any> = {};\n  for (const [key, styleValue] of Object.entries(inlineProps)) {\n    if (key === 'transform') {\n      update[key] = styleValue.map((transform: Record<string, any>) => {\n        return getInlinePropsUpdate(transform);\n      });\n    } else if (isSharedValue(styleValue)) {\n      update[key] = styleValue.value;\n    } else {\n      update[key] = styleValue;\n    }\n  }\n  return update;\n}\n\ntype Options<P> = {\n  setNativeProps: (ref: ComponentRef, props: P) => void;\n};\n\ninterface ComponentRef extends Component {\n  setNativeProps?: (props: Record<string, unknown>) => void;\n  getScrollableNode?: () => ComponentRef;\n  getAnimatableRef?: () => ComponentRef;\n}\n\ninterface InitialComponentProps extends Record<string, unknown> {\n  ref?: Ref<Component>;\n  collapsable?: boolean;\n}\n\nexport default function createAnimatedComponent<P extends object>(\n  component: FunctionComponent<P>,\n  options?: Options<P>\n): FunctionComponent<AnimateProps<P>>;\n\nexport default function createAnimatedComponent<P extends object>(\n  component: ComponentClass<P>,\n  options?: Options<P>\n): ComponentClass<AnimateProps<P>>;\n\nexport default function createAnimatedComponent(\n  Component: ComponentType<InitialComponentProps>,\n  options?: Options<InitialComponentProps>\n): any {\n  invariant(\n    typeof Component !== 'function' ||\n      (Component.prototype && Component.prototype.isReactComponent),\n    `Looks like you're passing a function component \\`${Component.name}\\` to \\`createAnimatedComponent\\` function which supports only class components. Please wrap your function component with \\`React.forwardRef()\\` or use a class component instead.`\n  );\n\n  class AnimatedComponent extends React.Component<\n    AnimatedComponentProps<InitialComponentProps>\n  > {\n    _styles: StyleProps[] | null = null;\n    _animatedProps?: Partial<AnimatedComponentProps<AnimatedProps>>;\n    _viewTag = -1;\n    _isFirstRender = true;\n    animatedStyle: { value: StyleProps } = { value: {} };\n    initialStyle = {};\n    _component: ComponentRef | HTMLElement | null = null;\n    _inlinePropsViewDescriptors: ViewDescriptorsSet | null = null;\n    _inlinePropsMapperId: number | null = null;\n    _inlineProps: StyleProps = {};\n    _sharedElementTransition: SharedTransition | null = null;\n    _JSPropUpdater = new JSPropUpdater();\n    static displayName: string;\n\n    constructor(props: AnimatedComponentProps<InitialComponentProps>) {\n      super(props);\n      if (isJest()) {\n        this.animatedStyle = { value: {} };\n      }\n    }\n\n    componentWillUnmount() {\n      this._detachNativeEvents();\n      this._JSPropUpdater.removeOnJSPropsChangeListener(this);\n      this._detachStyles();\n      this._detachInlineProps();\n      this._sharedElementTransition?.unregisterTransition(this._viewTag);\n    }\n\n    componentDidMount() {\n      this._attachNativeEvents();\n      this._JSPropUpdater.addOnJSPropsChangeListener(this);\n      this._attachAnimatedStyles();\n      this._attachInlineProps();\n    }\n\n    _getEventViewRef() {\n      // Make sure to get the scrollable node for components that implement\n      // `ScrollResponder.Mixin`.\n      return (this._component as ComponentRef)?.getScrollableNode\n        ? (this._component as ComponentRef).getScrollableNode?.()\n        : this._component;\n    }\n\n    _attachNativeEvents() {\n      const node = this._getEventViewRef() as ComponentRef;\n      let viewTag = null; // We set it only if needed\n\n      for (const key in this.props) {\n        const prop = this.props[key];\n        if (\n          has('current', prop) &&\n          prop.current instanceof WorkletEventHandler\n        ) {\n          if (viewTag === null) {\n            viewTag = findNodeHandle(options?.setNativeProps ? this : node);\n          }\n          prop.current.registerForEvents(viewTag as number, key);\n        }\n      }\n    }\n\n    _detachNativeEvents() {\n      for (const key in this.props) {\n        const prop = this.props[key];\n        if (\n          has('current', prop) &&\n          prop.current instanceof WorkletEventHandler\n        ) {\n          prop.current.unregisterFromEvents();\n        }\n      }\n    }\n\n    _detachStyles() {\n      if (IS_WEB && this._styles !== null) {\n        for (const style of this._styles) {\n          if (style?.viewsRef) {\n            style.viewsRef.remove(this);\n          }\n        }\n      } else if (this._viewTag !== -1 && this._styles !== null) {\n        for (const style of this._styles) {\n          style.viewDescriptors.remove(this._viewTag);\n        }\n        if (this.props.animatedProps?.viewDescriptors) {\n          this.props.animatedProps.viewDescriptors.remove(this._viewTag);\n        }\n        if (global._IS_FABRIC) {\n          removeFromPropsRegistry(this._viewTag);\n        }\n      }\n    }\n\n    _reattachNativeEvents(\n      prevProps: AnimatedComponentProps<InitialComponentProps>\n    ) {\n      for (const key in prevProps) {\n        const prop = this.props[key];\n        if (\n          has('current', prop) &&\n          prop.current instanceof WorkletEventHandler &&\n          prop.current.reattachNeeded\n        ) {\n          prop.current.unregisterFromEvents();\n        }\n      }\n\n      let viewTag = null;\n\n      for (const key in this.props) {\n        const prop = this.props[key];\n        if (\n          has('current', prop) &&\n          prop.current instanceof WorkletEventHandler &&\n          prop.current.reattachNeeded\n        ) {\n          if (viewTag === null) {\n            const node = this._getEventViewRef() as ComponentRef;\n            viewTag = findNodeHandle(options?.setNativeProps ? this : node);\n          }\n          prop.current.registerForEvents(viewTag as number, key);\n          prop.current.reattachNeeded = false;\n        }\n      }\n    }\n\n    _updateFromNative(props: StyleProps) {\n      if (options?.setNativeProps) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        options.setNativeProps(this._component as ComponentRef, props);\n      } else {\n        // eslint-disable-next-line no-unused-expressions\n        (this._component as ComponentRef)?.setNativeProps?.(props);\n      }\n    }\n\n    _getViewInfo() {\n      let viewTag: number | HTMLElement | null;\n      let viewName: string | null;\n      let shadowNodeWrapper: ShadowNodeWrapper | null = null;\n      let viewConfig;\n      // Component can specify ref which should be animated when animated version of the component is created.\n      // Otherwise, we animate the component itself.\n      const component = (this._component as ComponentRef)?.getAnimatableRef\n        ? (this._component as ComponentRef).getAnimatableRef?.()\n        : this;\n\n      if (IS_WEB) {\n        // At this point I assume that `_setComponentRef` was already called and `_component` is set.\n        // `this._component` on web represents HTMLElement of our component, that's why we use casting\n        viewTag = this._component as HTMLElement;\n        viewName = null;\n        shadowNodeWrapper = null;\n        viewConfig = null;\n      } else {\n        // hostInstance can be null for a component that doesn't render anything (render function returns null). Example: svg Stop: https://github.com/react-native-svg/react-native-svg/blob/develop/src/elements/Stop.tsx\n        const hostInstance = RNRenderer.findHostInstance_DEPRECATED(component);\n        if (!hostInstance) {\n          throw new Error(\n            '[Reanimated] Cannot find host instance for this component. Maybe it renders nothing?'\n          );\n        }\n        // we can access view tag in the same way it's accessed here https://github.com/facebook/react/blob/e3f4eb7272d4ca0ee49f27577156b57eeb07cf73/packages/react-native-renderer/src/ReactFabric.js#L146\n        viewTag = hostInstance?._nativeTag;\n        /**\n         * RN uses viewConfig for components for storing different properties of the component(example: https://github.com/facebook/react-native/blob/master/packages/react-native/Libraries/Components/ScrollView/ScrollViewViewConfig.js#L16).\n         * The name we're looking for is in the field named uiViewClassName.\n         */\n        viewName = hostInstance?.viewConfig?.uiViewClassName;\n\n        viewConfig = hostInstance?.viewConfig;\n\n        if (global._IS_FABRIC) {\n          shadowNodeWrapper = getShadowNodeWrapperFromRef(this);\n        }\n      }\n      return { viewTag, viewName, shadowNodeWrapper, viewConfig };\n    }\n\n    _attachAnimatedStyles() {\n      const styles = this.props.style\n        ? onlyAnimatedStyles(flattenArray<StyleProps>(this.props.style))\n        : [];\n      const prevStyles = this._styles;\n      this._styles = styles;\n\n      const prevAnimatedProps = this._animatedProps;\n      this._animatedProps = this.props.animatedProps;\n\n      const { viewTag, viewName, shadowNodeWrapper, viewConfig } =\n        this._getViewInfo();\n\n      // update UI props whitelist for this view\n      const hasReanimated2Props =\n        this.props.animatedProps?.viewDescriptors || styles.length;\n      if (hasReanimated2Props && viewConfig) {\n        adaptViewConfig(viewConfig);\n      }\n\n      this._viewTag = viewTag as number;\n\n      // remove old styles\n      if (prevStyles) {\n        // in most of the cases, views have only a single animated style and it remains unchanged\n        const hasOneSameStyle =\n          styles.length === 1 &&\n          prevStyles.length === 1 &&\n          isSameAnimatedStyle(styles[0], prevStyles[0]);\n\n        if (!hasOneSameStyle) {\n          // otherwise, remove each style that is not present in new styles\n          for (const prevStyle of prevStyles) {\n            const isPresent = styles.some((style) =>\n              isSameAnimatedStyle(style, prevStyle)\n            );\n            if (!isPresent) {\n              prevStyle.viewDescriptors.remove(viewTag);\n            }\n          }\n        }\n      }\n\n      styles.forEach((style) => {\n        style.viewDescriptors.add({\n          tag: viewTag,\n          name: viewName,\n          shadowNodeWrapper,\n        });\n        if (isJest()) {\n          /**\n           * We need to connect Jest's TestObject instance whose contains just props object\n           * with the updateProps() function where we update the properties of the component.\n           * We can't update props object directly because TestObject contains a copy of props - look at render function:\n           * const props = this._filterNonAnimatedProps(this.props);\n           */\n          this.animatedStyle.value = {\n            ...this.animatedStyle.value,\n            ...style.initial.value,\n          };\n          style.animatedStyle.current = this.animatedStyle;\n        }\n      });\n\n      // detach old animatedProps\n      if (\n        prevAnimatedProps &&\n        !isSameAnimatedProps(prevAnimatedProps, this.props.animatedProps)\n      ) {\n        prevAnimatedProps.viewDescriptors!.remove(viewTag as number);\n      }\n\n      // attach animatedProps property\n      if (this.props.animatedProps?.viewDescriptors) {\n        this.props.animatedProps.viewDescriptors.add({\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          tag: viewTag as number,\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          name: viewName!,\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          shadowNodeWrapper: shadowNodeWrapper!,\n        });\n      }\n    }\n\n    _attachInlineProps() {\n      const newInlineProps: Record<string, any> =\n        extractSharedValuesMapFromProps(this.props);\n      const hasChanged = inlinePropsHasChanged(\n        newInlineProps,\n        this._inlineProps\n      );\n\n      if (hasChanged) {\n        if (!this._inlinePropsViewDescriptors) {\n          this._inlinePropsViewDescriptors = makeViewDescriptorsSet();\n\n          const { viewTag, viewName, shadowNodeWrapper, viewConfig } =\n            this._getViewInfo();\n\n          if (Object.keys(newInlineProps).length && viewConfig) {\n            adaptViewConfig(viewConfig);\n          }\n\n          this._inlinePropsViewDescriptors.add({\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            tag: viewTag as number,\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            name: viewName!,\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            shadowNodeWrapper: shadowNodeWrapper!,\n          });\n        }\n        const sharableViewDescriptors =\n          this._inlinePropsViewDescriptors.sharableViewDescriptors;\n\n        const maybeViewRef = NativeReanimatedModule.native\n          ? undefined\n          : ({ items: new Set([this]) } as ViewRefSet<any>); // see makeViewsRefSet\n\n        const updaterFunction = () => {\n          'worklet';\n          const update = getInlinePropsUpdate(newInlineProps);\n          updateProps(sharableViewDescriptors, update, maybeViewRef);\n        };\n        this._inlineProps = newInlineProps;\n        if (this._inlinePropsMapperId) {\n          stopMapper(this._inlinePropsMapperId);\n        }\n        this._inlinePropsMapperId = null;\n        if (Object.keys(newInlineProps).length) {\n          this._inlinePropsMapperId = startMapper(\n            updaterFunction,\n            Object.values(newInlineProps)\n          );\n        }\n      }\n    }\n\n    _detachInlineProps() {\n      if (this._inlinePropsMapperId) {\n        stopMapper(this._inlinePropsMapperId);\n      }\n    }\n\n    componentDidUpdate(\n      prevProps: AnimatedComponentProps<InitialComponentProps>\n    ) {\n      this._reattachNativeEvents(prevProps);\n      this._attachAnimatedStyles();\n      this._attachInlineProps();\n    }\n\n    _setComponentRef = setAndForwardRef<Component | HTMLElement>({\n      getForwardedRef: () =>\n        this.props.forwardedRef as MutableRefObject<\n          Component<Record<string, unknown>, Record<string, unknown>, unknown>\n        >,\n      setLocalRef: (ref) => {\n        // TODO update config\n\n        const tag = IS_WEB\n          ? (ref as HTMLElement)\n          : findNodeHandle(ref as Component);\n\n        const { layout, entering, exiting, sharedTransitionTag } = this.props;\n        if (\n          (layout || entering || exiting || sharedTransitionTag) &&\n          tag != null\n        ) {\n          if (!shouldBeUseWeb()) {\n            enableLayoutAnimations(true, false);\n          }\n          if (layout) {\n            configureLayoutAnimations(\n              tag,\n              LayoutAnimationType.LAYOUT,\n              maybeBuild(\n                layout,\n                undefined /* We don't have to warn user if style has common properties with animation for LAYOUT */,\n                AnimatedComponent.displayName\n              )\n            );\n          }\n          if (entering) {\n            configureLayoutAnimations(\n              tag,\n              LayoutAnimationType.ENTERING,\n              maybeBuild(\n                entering,\n                this.props?.style,\n                AnimatedComponent.displayName\n              )\n            );\n          }\n          if (exiting) {\n            const reduceMotionInExiting =\n              'getReduceMotion' in exiting &&\n              typeof exiting.getReduceMotion === 'function'\n                ? getReduceMotionFromConfig(exiting.getReduceMotion())\n                : getReduceMotionFromConfig();\n            if (!reduceMotionInExiting) {\n              configureLayoutAnimations(\n                tag,\n                LayoutAnimationType.EXITING,\n                maybeBuild(\n                  exiting,\n                  this.props?.style,\n                  AnimatedComponent.displayName\n                )\n              );\n            }\n          }\n          if (sharedTransitionTag && !IS_WEB) {\n            const sharedElementTransition =\n              this.props.sharedTransitionStyle ?? new SharedTransition();\n            const reduceMotionInTransition = getReduceMotionFromConfig(\n              sharedElementTransition.getReduceMotion()\n            );\n            if (!reduceMotionInTransition) {\n              sharedElementTransition.registerTransition(\n                tag as number,\n                sharedTransitionTag\n              );\n              this._sharedElementTransition = sharedElementTransition;\n            }\n          }\n        }\n\n        if (ref !== this._component) {\n          this._component = ref;\n        }\n      },\n    });\n\n    _filterNonAnimatedProps(\n      inputProps: AnimatedComponentProps<InitialComponentProps>\n    ): Record<string, unknown> {\n      const props: Record<string, unknown> = {};\n      for (const key in inputProps) {\n        const value = inputProps[key];\n        if (key === 'style') {\n          const styleProp = inputProps.style;\n          const styles = flattenArray<StyleProps>(styleProp ?? []);\n          const processedStyle: StyleProps = styles.map((style) => {\n            if (style && style.viewDescriptors) {\n              // this is how we recognize styles returned by useAnimatedStyle\n              style.viewsRef.add(this);\n              if (this._isFirstRender) {\n                this.initialStyle = {\n                  ...style.initial.value,\n                  ...this.initialStyle,\n                  ...initialUpdaterRun<StyleProps>(style.initial.updater),\n                };\n              }\n              return this.initialStyle;\n            } else if (hasInlineStyles(style)) {\n              if (this._isFirstRender) {\n                return getInlinePropsUpdate(style);\n              }\n              const newStyle: StyleProps = {};\n              for (const [key, styleValue] of Object.entries(style)) {\n                if (\n                  !isSharedValue(styleValue) &&\n                  !(key === 'transform' && isInlineStyleTransform(styleValue))\n                ) {\n                  newStyle[key] = styleValue;\n                }\n              }\n              return newStyle;\n            } else {\n              return style;\n            }\n          });\n          props[key] = StyleSheet.flatten(processedStyle);\n        } else if (key === 'animatedProps') {\n          const animatedProp = inputProps.animatedProps as Partial<\n            AnimatedComponentProps<AnimatedProps>\n          >;\n          if (animatedProp.initial !== undefined) {\n            Object.keys(animatedProp.initial.value).forEach((key) => {\n              props[key] = animatedProp.initial?.value[key];\n              animatedProp.viewsRef?.add(this);\n            });\n          }\n        } else if (\n          has('current', value) &&\n          value.current instanceof WorkletEventHandler\n        ) {\n          if (value.current.eventNames.length > 0) {\n            value.current.eventNames.forEach((eventName) => {\n              props[eventName] = has('listeners', value.current)\n                ? (value.current.listeners as Record<string, unknown>)[\n                    eventName\n                  ]\n                : dummyListener;\n            });\n          } else {\n            props[key] = dummyListener;\n          }\n        } else if (isSharedValue(value)) {\n          if (this._isFirstRender) {\n            props[key] = (value as SharedValue<any>).value;\n          }\n        } else if (\n          key !== 'onGestureHandlerStateChange' ||\n          !isChromeDebugger()\n        ) {\n          props[key] = value;\n        }\n      }\n      return props;\n    }\n\n    render() {\n      const props = this._filterNonAnimatedProps(this.props);\n      if (isJest()) {\n        props.animatedStyle = this.animatedStyle;\n      }\n\n      if (this._isFirstRender) {\n        this._isFirstRender = false;\n      }\n\n      const platformProps = Platform.select({\n        web: {},\n        default: { collapsable: false },\n      });\n\n      return (\n        <Component\n          {...props}\n          // Casting is used here, because ref can be null - in that case it cannot be assigned to HTMLElement.\n          // After spending some time trying to figure out what to do with this problem, we decided to leave it this way\n          ref={this._setComponentRef as (ref: Component) => void}\n          {...platformProps}\n        />\n      );\n    }\n  }\n\n  AnimatedComponent.displayName = `AnimatedComponent(${\n    Component.displayName || Component.name || 'Component'\n  })`;\n\n  return React.forwardRef<Component>((props, ref) => {\n    return (\n      <AnimatedComponent\n        {...props}\n        {...(ref === null ? null : { forwardedRef: ref })}\n      />\n    );\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}