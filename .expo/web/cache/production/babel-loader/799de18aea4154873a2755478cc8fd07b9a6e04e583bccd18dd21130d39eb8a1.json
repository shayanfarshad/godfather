{"ast":null,"code":"Object.defineProperty(exports,\"__esModule\",{value:true});exports.Portal=void 0;var _react=require(\"react\");var _nonSecure=require(\"nanoid/non-secure\");var _usePortal2=require(\"../../hooks/usePortal\");var PortalComponent=function PortalComponent(_ref){var _providedName=_ref.name,hostName=_ref.hostName,_providedHandleOnMount=_ref.handleOnMount,_providedHandleOnUnmount=_ref.handleOnUnmount,_providedHandleOnUpdate=_ref.handleOnUpdate,children=_ref.children;var _usePortal=(0,_usePortal2.usePortal)(hostName),addUpdatePortal=_usePortal.addPortal,removePortal=_usePortal.removePortal;var name=(0,_react.useMemo)(function(){return _providedName||(0,_nonSecure.nanoid)();},[_providedName]);var handleOnMountRef=(0,_react.useRef)();var handleOnUnmountRef=(0,_react.useRef)();var handleOnUpdateRef=(0,_react.useRef)();var handleOnMount=(0,_react.useCallback)(function(){if(_providedHandleOnMount){_providedHandleOnMount(function(){return addUpdatePortal(name,children);});}else{addUpdatePortal(name,children);}},[_providedHandleOnMount,addUpdatePortal]);handleOnMountRef.current=handleOnMount;var handleOnUnmount=(0,_react.useCallback)(function(){if(_providedHandleOnUnmount){_providedHandleOnUnmount(function(){return removePortal(name);});}else{removePortal(name);}},[_providedHandleOnUnmount,removePortal]);handleOnUnmountRef.current=handleOnUnmount;var handleOnUpdate=(0,_react.useCallback)(function(){if(_providedHandleOnUpdate){_providedHandleOnUpdate(function(){return addUpdatePortal(name,children);});}else{addUpdatePortal(name,children);}},[_providedHandleOnUpdate,addUpdatePortal,children]);handleOnUpdateRef.current=handleOnUpdate;(0,_react.useEffect)(function(){var _handleOnMountRef$cur;(_handleOnMountRef$cur=handleOnMountRef.current)===null||_handleOnMountRef$cur===void 0?void 0:_handleOnMountRef$cur.call(handleOnMountRef);return function(){var _handleOnUnmountRef$c;(_handleOnUnmountRef$c=handleOnUnmountRef.current)===null||_handleOnUnmountRef$c===void 0?void 0:_handleOnUnmountRef$c.call(handleOnUnmountRef);handleOnMountRef.current=undefined;handleOnUnmountRef.current=undefined;handleOnUpdateRef.current=undefined;};},[]);(0,_react.useEffect)(function(){var _handleOnUpdateRef$cu;(_handleOnUpdateRef$cu=handleOnUpdateRef.current)===null||_handleOnUpdateRef$cu===void 0?void 0:_handleOnUpdateRef$cu.call(handleOnUpdateRef);},[children]);return null;};var Portal=exports.Portal=(0,_react.memo)(PortalComponent);Portal.displayName='Portal';","map":{"version":3,"names":["_react","require","_nonSecure","_usePortal2","PortalComponent","_ref","_providedName","name","hostName","_providedHandleOnMount","handleOnMount","_providedHandleOnUnmount","handleOnUnmount","_providedHandleOnUpdate","handleOnUpdate","children","_usePortal","usePortal","addUpdatePortal","addPortal","removePortal","useMemo","nanoid","handleOnMountRef","useRef","handleOnUnmountRef","handleOnUpdateRef","useCallback","current","useEffect","_handleOnMountRef$cur","call","_handleOnUnmountRef$c","undefined","_handleOnUpdateRef$cu","Portal","exports","memo","displayName"],"sources":["/Users/shayan/workspace/godfather/node_modules/@gorhom/portal/lib/module/components/portal/Portal.tsx"],"sourcesContent":["import { memo, useCallback, useEffect, useMemo, useRef } from 'react';\nimport { nanoid } from 'nanoid/non-secure';\nimport { usePortal } from '../../hooks/usePortal';\nimport type { PortalProps } from './types';\n\nconst PortalComponent = ({\n  name: _providedName,\n  hostName,\n  handleOnMount: _providedHandleOnMount,\n  handleOnUnmount: _providedHandleOnUnmount,\n  handleOnUpdate: _providedHandleOnUpdate,\n  children,\n}: PortalProps) => {\n  //#region hooks\n  const { addPortal: addUpdatePortal, removePortal } = usePortal(hostName);\n  //#endregion\n\n  //#region variables\n  const name = useMemo(() => _providedName || nanoid(), [_providedName]);\n  //#endregion\n\n  //#region refs\n  const handleOnMountRef = useRef<Function>();\n  const handleOnUnmountRef = useRef<Function>();\n  const handleOnUpdateRef = useRef<Function>();\n  //#endregion\n\n  //#region callbacks\n  const handleOnMount = useCallback(() => {\n    if (_providedHandleOnMount) {\n      _providedHandleOnMount(() => addUpdatePortal(name, children));\n    } else {\n      addUpdatePortal(name, children);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [_providedHandleOnMount, addUpdatePortal]);\n  handleOnMountRef.current = handleOnMount;\n\n  const handleOnUnmount = useCallback(() => {\n    if (_providedHandleOnUnmount) {\n      _providedHandleOnUnmount(() => removePortal(name));\n    } else {\n      removePortal(name);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [_providedHandleOnUnmount, removePortal]);\n  handleOnUnmountRef.current = handleOnUnmount;\n\n  const handleOnUpdate = useCallback(() => {\n    if (_providedHandleOnUpdate) {\n      _providedHandleOnUpdate(() => addUpdatePortal(name, children));\n    } else {\n      addUpdatePortal(name, children);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [_providedHandleOnUpdate, addUpdatePortal, children]);\n  handleOnUpdateRef.current = handleOnUpdate;\n  //#endregion\n\n  //#region effects\n  useEffect(() => {\n    handleOnMountRef.current?.();\n    return () => {\n      handleOnUnmountRef.current?.();\n\n      // remove callbacks refs\n      handleOnMountRef.current = undefined;\n      handleOnUnmountRef.current = undefined;\n      handleOnUpdateRef.current = undefined;\n    };\n  }, []);\n  useEffect(() => {\n    handleOnUpdateRef.current?.();\n  }, [children]);\n  //#endregion\n\n  return null;\n};\n\nexport const Portal = memo(PortalComponent);\nPortal.displayName = 'Portal';\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}