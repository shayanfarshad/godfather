{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _slicedToArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));var _native=require(\"@react-navigation/native\");var _react=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native\");var _Modal=require(\"../components/Modal\");var _bottomSheet=require(\"@gorhom/bottom-sheet\");var _Constants=require(\"../constants/Constants\");var _Text=_interopRequireDefault(require(\"../components/Text\"));var _theme=require(\"../theme\");var _i18n=require(\"../i18n\");function _getRequireWildcardCache(e){if(\"function\"!=typeof WeakMap)return null;var r=new WeakMap(),t=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r;})(e);}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(\"default\"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u];}return n.default=e,t&&t.set(e,n),n;}var NavigationWrapper=function NavigationWrapper(_ref){var children=_ref.children;var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2.default)(_useState,2),isBackHandled=_useState2[0],setIsBackHandled=_useState2[1];var nav=(0,_native.useNavigation)();var exitRef=(0,_react.useRef)(null);(0,_react.useEffect)(function(){var backHandler=_reactNative.BackHandler.addEventListener('hardwareBackPress',handleBackPress);return function(){return backHandler.remove();};},[]);var handleBackPress=function handleBackPress(){if(!isBackHandled){setIsBackHandled(true);if(nav.canGoBack()===false){var _exitRef$current;exitRef==null?void 0:(_exitRef$current=exitRef.current)==null?void 0:_exitRef$current.present();return true;}nav.goBack();return true;}return false;};return _react.default.createElement(_react.default.Fragment,null,children,_react.default.createElement(_Modal.Modal,{modalRef:exitRef,index:0,onDismiss:function onDismiss(){var _exitRef$current2;return exitRef==null?void 0:(_exitRef$current2=exitRef.current)==null?void 0:_exitRef$current2.close();},snapPoints:['30%'],backgroundStyle:{backgroundColor:_theme.colors.cardBackground}},_react.default.createElement(_reactNative.View,{style:styles.selectImageContainer},_react.default.createElement(_reactNative.View,null,_react.default.createElement(_Text.default,{style:{fontSize:20}},(0,_i18n.translate)('game.doYouWantToCloseApp'))),_react.default.createElement(_reactNative.View,{style:{flexDirection:'row',width:'80%',justifyContent:'space-around'}},_react.default.createElement(_reactNative.Pressable,{onPress:function onPress(){_reactNative.BackHandler.exitApp();},style:[styles.addImageBtnCard,{backgroundColor:_theme.colors.background}]},_react.default.createElement(_Text.default,null,(0,_i18n.translate)('common.ok'))),_react.default.createElement(_reactNative.Pressable,{onPress:function onPress(){var _exitRef$current3;setIsBackHandled(false);exitRef==null?void 0:(_exitRef$current3=exitRef.current)==null?void 0:_exitRef$current3.close();},style:[styles.addImageBtnCard,{backgroundColor:_theme.colors.background}]},_react.default.createElement(_Text.default,null,(0,_i18n.translate)('common.cancel')))))));};var styles=_reactNative.StyleSheet.create({selectImageContainer:{flexDirection:'column',height:'80%',width:'100%',justifyContent:'space-around',alignItems:'center'},addImageBtnCard:{justifyContent:'center',alignItems:'center',borderRadius:10,width:80,height:40}});var _default=exports.default=NavigationWrapper;","map":{"version":3,"names":["_native","require","_react","_interopRequireWildcard","_reactNative","_Modal","_bottomSheet","_Constants","_Text","_interopRequireDefault","_theme","_i18n","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","NavigationWrapper","_ref","children","_useState","useState","_useState2","_slicedToArray2","isBackHandled","setIsBackHandled","nav","useNavigation","exitRef","useRef","useEffect","backHandler","BackHandler","addEventListener","handleBackPress","remove","canGoBack","_exitRef$current","current","present","goBack","createElement","Fragment","Modal","modalRef","index","onDismiss","_exitRef$current2","close","snapPoints","backgroundStyle","backgroundColor","colors","cardBackground","View","style","styles","selectImageContainer","fontSize","translate","flexDirection","width","justifyContent","Pressable","onPress","exitApp","addImageBtnCard","background","_exitRef$current3","StyleSheet","create","height","alignItems","borderRadius","_default","exports"],"sources":["/Users/shayan/workspace/godfather/src/navigation/navigationWrapper.jsx"],"sourcesContent":["/**\n * @format\n * @flow strict-local\n */\n\nimport {useNavigation} from '@react-navigation/native';\nimport React, {useEffect, useRef, useState} from 'react';\nimport {BackHandler, Alert, Pressable, View, StyleSheet} from 'react-native';\nimport {Modal} from '../components/Modal';\nimport {BottomSheetModal} from '@gorhom/bottom-sheet';\nimport {backgroundColor} from '../constants/Constants';\nimport Text from '../components/Text';\nimport {colors} from '../theme';\nimport {translate} from '../i18n';\n\nconst NavigationWrapper = ({children}) => {\n  const [isBackHandled, setIsBackHandled] = useState(false);\n  const nav = useNavigation();\n  const exitRef = useRef<BottomSheetModal>(null);\n\n  useEffect(() => {\n    const backHandler = BackHandler.addEventListener(\n      'hardwareBackPress',\n      handleBackPress,\n    );\n\n    return () => backHandler.remove();\n  }, []);\n\n  const handleBackPress = () => {\n    if (!isBackHandled) {\n      setIsBackHandled(true);\n      if (nav.canGoBack() === false) {\n        exitRef?.current?.present();\n\n        return true;\n      }\n\n      nav.goBack();\n      // Your custom navigation logic here (e.g., show a confirmation dialog, go back to the previous screen, etc.)\n      // Example:\n\n      return true;\n    }\n\n    return false;\n  };\n\n  return (\n    // Pass the children components and navigation prop to the wrapper\n    <>\n      {children}\n      <Modal\n        modalRef={exitRef}\n        index={0}\n        onDismiss={() => exitRef?.current?.close()}\n        snapPoints={['30%']}\n        backgroundStyle={{\n          backgroundColor: colors.cardBackground,\n        }}>\n        <View style={styles.selectImageContainer}>\n          <View>\n            <Text style={{fontSize: 20}}>\n              {translate('game.doYouWantToCloseApp')}\n            </Text>\n          </View>\n          <View\n            style={{\n              flexDirection: 'row',\n              width: '80%',\n              justifyContent: 'space-around',\n            }}>\n            <Pressable\n              onPress={() => {\n                BackHandler.exitApp();\n              }}\n              style={[\n                styles.addImageBtnCard,\n                {\n                  backgroundColor: colors.background,\n                },\n              ]}>\n              <Text>{translate('common.ok')}</Text>\n            </Pressable>\n            <Pressable\n              onPress={() => {\n                setIsBackHandled(false);\n                exitRef?.current?.close();\n              }}\n              style={[\n                styles.addImageBtnCard,\n                {\n                  backgroundColor: colors.background,\n                },\n              ]}>\n              <Text>{translate('common.cancel')}</Text>\n            </Pressable>\n          </View>\n        </View>\n      </Modal>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  selectImageContainer: {\n    flexDirection: 'column',\n    height: '80%',\n    width: '100%',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n  },\n  addImageBtnCard: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 10,\n    width: 80,\n    height: 40,\n  },\n});\n\nexport default NavigationWrapper;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}