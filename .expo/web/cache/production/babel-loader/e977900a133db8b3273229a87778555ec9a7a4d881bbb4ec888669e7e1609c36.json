{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.reducer=void 0;var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _constants=require(\"./constants\");var _logger=require(\"../utilities/logger\");var registerHost=function registerHost(state,hostName){if(!(hostName in state)){state[hostName]=[];}return state;};var deregisterHost=function deregisterHost(state,hostName){delete state[hostName];return state;};var addUpdatePortal=function addUpdatePortal(state,hostName,portalName,node){if(!(hostName in state)){state=registerHost(state,hostName);}var index=state[hostName].findIndex(function(item){return item.name===portalName;});if(index!==-1){state[hostName][index].node=node;}else{state[hostName].push({name:portalName,node:node});}return state;};var removePortal=function removePortal(state,hostName,portalName){if(!(hostName in state)){(0,_logger.print)({component:reducer.name,method:removePortal.name,params:\"Failed to remove portal '\".concat(portalName,\"', '\").concat(hostName,\"' was not registered!\")});return state;}var index=state[hostName].findIndex(function(item){return item.name===portalName;});if(index!==-1)state[hostName].splice(index,1);return state;};var reducer=exports.reducer=function reducer(state,action){var type=action.type;var clonedState=(0,_extends2.default)({},state);switch(type){case _constants.ACTIONS.REGISTER_HOST:return registerHost(clonedState,action.hostName);case _constants.ACTIONS.DEREGISTER_HOST:return deregisterHost(clonedState,action.hostName);case _constants.ACTIONS.ADD_UPDATE_PORTAL:return addUpdatePortal(clonedState,action.hostName,action.portalName,action.node);case _constants.ACTIONS.REMOVE_PORTAL:return removePortal(clonedState,action.hostName,action.portalName);default:return state;}};","map":{"version":3,"names":["_constants","require","_logger","registerHost","state","hostName","deregisterHost","addUpdatePortal","portalName","node","index","findIndex","item","name","push","removePortal","print","component","reducer","method","params","concat","splice","exports","action","type","clonedState","_extends2","default","ACTIONS","REGISTER_HOST","DEREGISTER_HOST","ADD_UPDATE_PORTAL","REMOVE_PORTAL"],"sources":["/Users/shayan/workspace/godfather/node_modules/@gorhom/portal/lib/module/state/reducer.ts"],"sourcesContent":["import { ACTIONS } from './constants';\nimport { print } from '../utilities/logger';\nimport type { PortalType } from '../types';\nimport type {\n  ActionTypes,\n  AddUpdatePortalAction,\n  RemovePortalAction,\n} from './types';\n\nconst registerHost = (\n  state: Record<string, Array<PortalType>>,\n  hostName: string\n) => {\n  if (!(hostName in state)) {\n    state[hostName] = [];\n  }\n  return state;\n};\n\nconst deregisterHost = (\n  state: Record<string, Array<PortalType>>,\n  hostName: string\n) => {\n  delete state[hostName];\n  return state;\n};\n\nconst addUpdatePortal = (\n  state: Record<string, Array<PortalType>>,\n  hostName: string,\n  portalName: string,\n  node: any\n) => {\n  if (!(hostName in state)) {\n    state = registerHost(state, hostName);\n  }\n\n  /**\n   * updated portal, if it was already added.\n   */\n  const index = state[hostName].findIndex(item => item.name === portalName);\n  if (index !== -1) {\n    state[hostName][index].node = node;\n  } else {\n    state[hostName].push({\n      name: portalName,\n      node,\n    });\n  }\n  return state;\n};\n\nconst removePortal = (\n  state: Record<string, Array<PortalType>>,\n  hostName: string,\n  portalName: string\n) => {\n  if (!(hostName in state)) {\n    print({\n      component: reducer.name,\n      method: removePortal.name,\n      params: `Failed to remove portal '${portalName}', '${hostName}' was not registered!`,\n    });\n    return state;\n  }\n\n  const index = state[hostName].findIndex(item => item.name === portalName);\n  if (index !== -1) state[hostName].splice(index, 1);\n  return state;\n};\n\nexport const reducer = (\n  state: Record<string, Array<PortalType>>,\n  action: ActionTypes\n) => {\n  const { type } = action;\n  let clonedState = { ...state };\n  switch (type) {\n    case ACTIONS.REGISTER_HOST:\n      return registerHost(clonedState, action.hostName);\n    case ACTIONS.DEREGISTER_HOST:\n      return deregisterHost(clonedState, action.hostName);\n    case ACTIONS.ADD_UPDATE_PORTAL:\n      return addUpdatePortal(\n        clonedState,\n        action.hostName,\n        (action as AddUpdatePortalAction).portalName,\n        (action as AddUpdatePortalAction).node\n      );\n    case ACTIONS.REMOVE_PORTAL:\n      return removePortal(\n        clonedState,\n        action.hostName,\n        (action as RemovePortalAction).portalName\n      );\n    default:\n      return state;\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}