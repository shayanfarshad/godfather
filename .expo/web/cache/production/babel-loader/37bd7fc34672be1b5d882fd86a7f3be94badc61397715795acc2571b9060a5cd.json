{"ast":null,"code":"Object.defineProperty(exports,\"__esModule\",{value:true});exports.useKeyboard=void 0;var _react=require(\"react\");var _reactNative=require(\"react-native\");var _reactNativeReanimated=require(\"react-native-reanimated\");var _constants=require(\"../constants\");var KEYBOARD_EVENT_MAPPER={KEYBOARD_SHOW:_reactNative.Platform.select({ios:'keyboardWillShow',android:'keyboardDidShow',default:''}),KEYBOARD_HIDE:_reactNative.Platform.select({ios:'keyboardWillHide',android:'keyboardDidHide',default:''})};var _worklet_9487433586659_init_data={code:\"function anonymous(state,height,duration,easing){const{KEYBOARD_STATE,shouldHandleKeyboardEvents,temporaryCachedKeyboardEvent,keyboardHeight,keyboardAnimationDuration,keyboardAnimationEasing,keyboardState}=this._closure;if(state===KEYBOARD_STATE.SHOWN&&!shouldHandleKeyboardEvents.value){temporaryCachedKeyboardEvent.value=[state,height,duration,easing];return;}keyboardHeight.value=state===KEYBOARD_STATE.SHOWN?height:height===0?keyboardHeight.value:height;keyboardAnimationDuration.value=duration;keyboardAnimationEasing.value=easing;keyboardState.value=state;temporaryCachedKeyboardEvent.value=[];}\",location:\"node_modules/@gorhom/bottom-sheet/lib/module/hooks/useKeyboard.js\"};var _worklet_1100937365606_init_data={code:\"function anonymous(){const{shouldHandleKeyboardEvents}=this._closure;return shouldHandleKeyboardEvents.value;}\",location:\"node_modules/@gorhom/bottom-sheet/lib/module/hooks/useKeyboard.js\"};var _worklet_17042035129530_init_data={code:\"function anonymous(result){const{temporaryCachedKeyboardEvent,handleKeyboardEvent}=this._closure;const params=temporaryCachedKeyboardEvent.value;if(result&&params.length>0){handleKeyboardEvent(params[0],params[1],params[2],params[3]);}}\",location:\"node_modules/@gorhom/bottom-sheet/lib/module/hooks/useKeyboard.js\"};var useKeyboard=exports.useKeyboard=function useKeyboard(){var shouldHandleKeyboardEvents=(0,_reactNativeReanimated.useSharedValue)(false);var keyboardState=(0,_reactNativeReanimated.useSharedValue)(_constants.KEYBOARD_STATE.UNDETERMINED);var keyboardHeight=(0,_reactNativeReanimated.useSharedValue)(0);var keyboardAnimationEasing=(0,_reactNativeReanimated.useSharedValue)('keyboard');var keyboardAnimationDuration=(0,_reactNativeReanimated.useSharedValue)(500);var temporaryCachedKeyboardEvent=(0,_reactNativeReanimated.useSharedValue)([]);var handleKeyboardEvent=(0,_reactNativeReanimated.useWorkletCallback)(function(){var _f=function _f(state,height,duration,easing){if(state===_constants.KEYBOARD_STATE.SHOWN&&!shouldHandleKeyboardEvents.value){temporaryCachedKeyboardEvent.value=[state,height,duration,easing];return;}keyboardHeight.value=state===_constants.KEYBOARD_STATE.SHOWN?height:height===0?keyboardHeight.value:height;keyboardAnimationDuration.value=duration;keyboardAnimationEasing.value=easing;keyboardState.value=state;temporaryCachedKeyboardEvent.value=[];};_f._closure={KEYBOARD_STATE:_constants.KEYBOARD_STATE,shouldHandleKeyboardEvents:shouldHandleKeyboardEvents,temporaryCachedKeyboardEvent:temporaryCachedKeyboardEvent,keyboardHeight:keyboardHeight,keyboardAnimationDuration:keyboardAnimationDuration,keyboardAnimationEasing:keyboardAnimationEasing,keyboardState:keyboardState};_f.__initData=_worklet_9487433586659_init_data;_f.__workletHash=9487433586659;return _f;}(),[]);(0,_react.useEffect)(function(){var handleOnKeyboardShow=function handleOnKeyboardShow(event){(0,_reactNativeReanimated.runOnUI)(handleKeyboardEvent)(_constants.KEYBOARD_STATE.SHOWN,event.endCoordinates.height,event.duration,event.easing);};var handleOnKeyboardHide=function handleOnKeyboardHide(event){(0,_reactNativeReanimated.runOnUI)(handleKeyboardEvent)(_constants.KEYBOARD_STATE.HIDDEN,event.endCoordinates.height,event.duration,event.easing);};var showSubscription=_reactNative.Keyboard.addListener(KEYBOARD_EVENT_MAPPER.KEYBOARD_SHOW,handleOnKeyboardShow);var hideSubscription=_reactNative.Keyboard.addListener(KEYBOARD_EVENT_MAPPER.KEYBOARD_HIDE,handleOnKeyboardHide);return function(){showSubscription.remove();hideSubscription.remove();};},[handleKeyboardEvent]);(0,_reactNativeReanimated.useAnimatedReaction)(function(){var _f=function _f(){return shouldHandleKeyboardEvents.value;};_f._closure={shouldHandleKeyboardEvents:shouldHandleKeyboardEvents};_f.__initData=_worklet_1100937365606_init_data;_f.__workletHash=1100937365606;return _f;}(),function(){var _f=function _f(result){var params=temporaryCachedKeyboardEvent.value;if(result&&params.length>0){handleKeyboardEvent(params[0],params[1],params[2],params[3]);}};_f._closure={temporaryCachedKeyboardEvent:temporaryCachedKeyboardEvent,handleKeyboardEvent:handleKeyboardEvent};_f.__initData=_worklet_17042035129530_init_data;_f.__workletHash=17042035129530;return _f;}());return{state:keyboardState,height:keyboardHeight,animationEasing:keyboardAnimationEasing,animationDuration:keyboardAnimationDuration,shouldHandleKeyboardEvents:shouldHandleKeyboardEvents};};","map":{"version":3,"names":["_react","require","_reactNative","_reactNativeReanimated","_constants","KEYBOARD_EVENT_MAPPER","KEYBOARD_SHOW","Platform","select","ios","android","default","KEYBOARD_HIDE","_worklet_9487433586659_init_data","code","location","_worklet_1100937365606_init_data","_worklet_17042035129530_init_data","useKeyboard","exports","shouldHandleKeyboardEvents","useSharedValue","keyboardState","KEYBOARD_STATE","UNDETERMINED","keyboardHeight","keyboardAnimationEasing","keyboardAnimationDuration","temporaryCachedKeyboardEvent","handleKeyboardEvent","useWorkletCallback","_f","state","height","duration","easing","SHOWN","value","_closure","__initData","__workletHash","useEffect","handleOnKeyboardShow","event","runOnUI","endCoordinates","handleOnKeyboardHide","HIDDEN","showSubscription","Keyboard","addListener","hideSubscription","remove","useAnimatedReaction","result","params","length","animationEasing","animationDuration"],"sources":["/Users/shayan/workspace/godfather/node_modules/@gorhom/bottom-sheet/lib/module/hooks/useKeyboard.ts"],"sourcesContent":["import { useEffect } from 'react';\nimport {\n  Keyboard,\n  KeyboardEvent,\n  KeyboardEventEasing,\n  KeyboardEventName,\n  Platform,\n} from 'react-native';\nimport {\n  runOnUI,\n  useAnimatedReaction,\n  useSharedValue,\n  useWorkletCallback,\n} from 'react-native-reanimated';\nimport { KEYBOARD_STATE } from '../constants';\n\nconst KEYBOARD_EVENT_MAPPER = {\n  KEYBOARD_SHOW: Platform.select({\n    ios: 'keyboardWillShow',\n    android: 'keyboardDidShow',\n    default: '',\n  }) as KeyboardEventName,\n  KEYBOARD_HIDE: Platform.select({\n    ios: 'keyboardWillHide',\n    android: 'keyboardDidHide',\n    default: '',\n  }) as KeyboardEventName,\n};\n\nexport const useKeyboard = () => {\n  //#region variables\n  const shouldHandleKeyboardEvents = useSharedValue(false);\n  const keyboardState = useSharedValue<KEYBOARD_STATE>(\n    KEYBOARD_STATE.UNDETERMINED\n  );\n  const keyboardHeight = useSharedValue(0);\n  const keyboardAnimationEasing =\n    useSharedValue<KeyboardEventEasing>('keyboard');\n  const keyboardAnimationDuration = useSharedValue(500);\n  const temporaryCachedKeyboardEvent = useSharedValue<any>([]);\n  //#endregion\n\n  //#region worklets\n  const handleKeyboardEvent = useWorkletCallback(\n    (state, height, duration, easing) => {\n      if (state === KEYBOARD_STATE.SHOWN && !shouldHandleKeyboardEvents.value) {\n        /**\n         * if the keyboard event was fired before the `onFocus` on TextInput,\n         * then we cache the input, and wait till the `shouldHandleKeyboardEvents`\n         * to be updated then fire this function again.\n         */\n        temporaryCachedKeyboardEvent.value = [state, height, duration, easing];\n        return;\n      }\n      keyboardHeight.value =\n        state === KEYBOARD_STATE.SHOWN\n          ? height\n          : height === 0\n          ? keyboardHeight.value\n          : height;\n      keyboardAnimationDuration.value = duration;\n      keyboardAnimationEasing.value = easing;\n      keyboardState.value = state;\n      temporaryCachedKeyboardEvent.value = [];\n    },\n    []\n  );\n  //#endregion\n\n  //#region effects\n  useEffect(() => {\n    const handleOnKeyboardShow = (event: KeyboardEvent) => {\n      runOnUI(handleKeyboardEvent)(\n        KEYBOARD_STATE.SHOWN,\n        event.endCoordinates.height,\n        event.duration,\n        event.easing\n      );\n    };\n    const handleOnKeyboardHide = (event: KeyboardEvent) => {\n      runOnUI(handleKeyboardEvent)(\n        KEYBOARD_STATE.HIDDEN,\n        event.endCoordinates.height,\n        event.duration,\n        event.easing\n      );\n    };\n\n    const showSubscription = Keyboard.addListener(\n      KEYBOARD_EVENT_MAPPER.KEYBOARD_SHOW,\n      handleOnKeyboardShow\n    );\n\n    const hideSubscription = Keyboard.addListener(\n      KEYBOARD_EVENT_MAPPER.KEYBOARD_HIDE,\n      handleOnKeyboardHide\n    );\n\n    return () => {\n      showSubscription.remove();\n      hideSubscription.remove();\n    };\n  }, [handleKeyboardEvent]);\n\n  /**\n   * This reaction is needed to handle the issue with multiline text input.\n   *\n   * @link https://github.com/gorhom/react-native-bottom-sheet/issues/411\n   */\n  useAnimatedReaction(\n    () => shouldHandleKeyboardEvents.value,\n    result => {\n      const params = temporaryCachedKeyboardEvent.value;\n      if (result && params.length > 0) {\n        handleKeyboardEvent(params[0], params[1], params[2], params[3]);\n      }\n    }\n  );\n  //#endregion\n\n  return {\n    state: keyboardState,\n    height: keyboardHeight,\n    animationEasing: keyboardAnimationEasing,\n    animationDuration: keyboardAnimationDuration,\n    shouldHandleKeyboardEvents,\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}