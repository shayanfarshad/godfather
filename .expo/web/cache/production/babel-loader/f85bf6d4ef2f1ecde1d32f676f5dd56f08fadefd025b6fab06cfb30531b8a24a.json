{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.TabBarIndicator=TabBarIndicator;var _toConsumableArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));var React=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native\");var _useAnimatedValue=require(\"./useAnimatedValue\");function _getRequireWildcardCache(e){if(\"function\"!=typeof WeakMap)return null;var r=new WeakMap(),t=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r;})(e);}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(\"default\"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u];}return n.default=e,t&&t.set(e,n),n;}var getTranslateX=function getTranslateX(position,routes,getTabWidth,gap){var inputRange=routes.map(function(_,i){return i;});var outputRange=routes.reduce(function(acc,_,i){if(i===0)return[0];return[].concat((0,_toConsumableArray2.default)(acc),[acc[i-1]+getTabWidth(i-1)+(gap!=null?gap:0)]);},[]);var translateX=position.interpolate({inputRange:inputRange,outputRange:outputRange,extrapolate:'clamp'});return _reactNative.Animated.multiply(translateX,_reactNative.I18nManager.isRTL?-1:1);};function TabBarIndicator(_ref){var getTabWidth=_ref.getTabWidth,layout=_ref.layout,navigationState=_ref.navigationState,position=_ref.position,width=_ref.width,gap=_ref.gap,style=_ref.style;var isIndicatorShown=React.useRef(false);var isWidthDynamic=width==='auto';var opacity=(0,_useAnimatedValue.useAnimatedValue)(isWidthDynamic?0:1);var indicatorVisible=isWidthDynamic?layout.width&&navigationState.routes.slice(0,navigationState.index).every(function(_,r){return getTabWidth(r);}):true;React.useEffect(function(){var fadeInIndicator=function fadeInIndicator(){if(!isIndicatorShown.current&&isWidthDynamic&&indicatorVisible){isIndicatorShown.current=true;_reactNative.Animated.timing(opacity,{toValue:1,duration:150,easing:_reactNative.Easing.in(_reactNative.Easing.linear),useNativeDriver:true}).start();}};fadeInIndicator();return function(){return opacity.stopAnimation();};},[indicatorVisible,isWidthDynamic,opacity]);var routes=navigationState.routes;var transform=[];if(layout.width){var translateX=routes.length>1?getTranslateX(position,routes,getTabWidth,gap):0;transform.push({translateX:translateX});}if(width==='auto'){var inputRange=routes.map(function(_,i){return i;});var outputRange=inputRange.map(getTabWidth);transform.push({scaleX:routes.length>1?position.interpolate({inputRange:inputRange,outputRange:outputRange,extrapolate:'clamp'}):outputRange[0]},{translateX:0.5});}return React.createElement(_reactNative.Animated.View,{style:[styles.indicator,{width:width==='auto'?1:width},layout.width&&_reactNative.Platform.OS!=='macos'?{left:0}:{left:100/routes.length*navigationState.index+\"%\"},{transform:transform},width==='auto'?{opacity:opacity}:null,style]});}var styles=_reactNative.StyleSheet.create({indicator:{backgroundColor:'#ffeb3b',position:'absolute',left:0,bottom:0,right:0,height:2}});","map":{"version":3,"names":["React","_interopRequireWildcard","require","_reactNative","_useAnimatedValue","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","getTranslateX","position","routes","getTabWidth","gap","inputRange","map","_","outputRange","reduce","acc","concat","_toConsumableArray2","translateX","interpolate","extrapolate","Animated","multiply","I18nManager","isRTL","TabBarIndicator","_ref","layout","navigationState","width","style","isIndicatorShown","useRef","isWidthDynamic","opacity","useAnimatedValue","indicatorVisible","slice","index","every","useEffect","fadeInIndicator","current","timing","toValue","duration","easing","Easing","in","linear","useNativeDriver","start","stopAnimation","transform","length","push","scaleX","createElement","View","styles","indicator","Platform","OS","left","StyleSheet","create","backgroundColor","bottom","right","height"],"sources":["/Users/shayan/workspace/godfather/node_modules/react-native-tab-view/src/TabBarIndicator.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  Animated,\n  Easing,\n  I18nManager,\n  Platform,\n  StyleProp,\n  StyleSheet,\n  ViewStyle,\n} from 'react-native';\n\nimport type { NavigationState, Route, SceneRendererProps } from './types';\nimport { useAnimatedValue } from './useAnimatedValue';\n\nexport type GetTabWidth = (index: number) => number;\n\nexport type Props<T extends Route> = SceneRendererProps & {\n  navigationState: NavigationState<T>;\n  width: string | number;\n  style?: StyleProp<ViewStyle>;\n  getTabWidth: GetTabWidth;\n  gap?: number;\n};\n\nconst getTranslateX = (\n  position: Animated.AnimatedInterpolation<number>,\n  routes: Route[],\n  getTabWidth: GetTabWidth,\n  gap?: number\n) => {\n  const inputRange = routes.map((_, i) => i);\n\n  // every index contains widths at all previous indices\n  const outputRange = routes.reduce<number[]>((acc, _, i) => {\n    if (i === 0) return [0];\n    return [...acc, acc[i - 1] + getTabWidth(i - 1) + (gap ?? 0)];\n  }, []);\n\n  const translateX = position.interpolate({\n    inputRange,\n    outputRange,\n    extrapolate: 'clamp',\n  });\n\n  return Animated.multiply(translateX, I18nManager.isRTL ? -1 : 1);\n};\n\nexport function TabBarIndicator<T extends Route>({\n  getTabWidth,\n  layout,\n  navigationState,\n  position,\n  width,\n  gap,\n  style,\n}: Props<T>) {\n  const isIndicatorShown = React.useRef(false);\n  const isWidthDynamic = width === 'auto';\n\n  const opacity = useAnimatedValue(isWidthDynamic ? 0 : 1);\n\n  const indicatorVisible = isWidthDynamic\n    ? layout.width &&\n      navigationState.routes\n        .slice(0, navigationState.index)\n        .every((_, r) => getTabWidth(r))\n    : true;\n\n  React.useEffect(() => {\n    const fadeInIndicator = () => {\n      if (\n        !isIndicatorShown.current &&\n        isWidthDynamic &&\n        // We should fade-in the indicator when we have widths for all the tab items\n        indicatorVisible\n      ) {\n        isIndicatorShown.current = true;\n\n        Animated.timing(opacity, {\n          toValue: 1,\n          duration: 150,\n          easing: Easing.in(Easing.linear),\n          useNativeDriver: true,\n        }).start();\n      }\n    };\n\n    fadeInIndicator();\n\n    return () => opacity.stopAnimation();\n  }, [indicatorVisible, isWidthDynamic, opacity]);\n\n  const { routes } = navigationState;\n\n  const transform = [];\n\n  if (layout.width) {\n    const translateX =\n      routes.length > 1 ? getTranslateX(position, routes, getTabWidth, gap) : 0;\n\n    transform.push({ translateX });\n  }\n\n  if (width === 'auto') {\n    const inputRange = routes.map((_, i) => i);\n    const outputRange = inputRange.map(getTabWidth);\n\n    transform.push(\n      {\n        scaleX:\n          routes.length > 1\n            ? position.interpolate({\n                inputRange,\n                outputRange,\n                extrapolate: 'clamp',\n              })\n            : outputRange[0],\n      },\n      { translateX: 0.5 }\n    );\n  }\n\n  return (\n    <Animated.View\n      style={[\n        styles.indicator,\n        { width: width === 'auto' ? 1 : width },\n        // If layout is not available, use `left` property for positioning the indicator\n        // This avoids rendering delay until we are able to calculate translateX\n        // If platform is macos use `left` property as `transform` is broken at the moment.\n        // See: https://github.com/microsoft/react-native-macos/issues/280\n        layout.width && Platform.OS !== 'macos'\n          ? { left: 0 }\n          : { left: `${(100 / routes.length) * navigationState.index}%` },\n        { transform },\n        width === 'auto' ? { opacity: opacity } : null,\n        style,\n      ]}\n    />\n  );\n}\n\nconst styles = StyleSheet.create({\n  indicator: {\n    backgroundColor: '#ffeb3b',\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    right: 0,\n    height: 2,\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}