{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.useFrameCallback=useFrameCallback;var _react=require(\"react\");var _FrameCallbackRegistryJS=_interopRequireDefault(require(\"../frameCallback/FrameCallbackRegistryJS\"));var frameCallbackRegistry=new _FrameCallbackRegistryJS.default();function useFrameCallback(callback){var autostart=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var ref=(0,_react.useRef)({setActive:function setActive(isActive){frameCallbackRegistry.manageStateFrameCallback(ref.current.callbackId,isActive);ref.current.isActive=isActive;},isActive:autostart,callbackId:-1});(0,_react.useEffect)(function(){ref.current.callbackId=frameCallbackRegistry.registerFrameCallback(callback);ref.current.setActive(ref.current.isActive);return function(){frameCallbackRegistry.unregisterFrameCallback(ref.current.callbackId);ref.current.callbackId=-1;};},[callback,autostart]);return ref.current;}","map":{"version":3,"names":["_react","require","_FrameCallbackRegistryJS","_interopRequireDefault","frameCallbackRegistry","FrameCallbackRegistryJS","useFrameCallback","callback","autostart","arguments","length","undefined","ref","useRef","setActive","isActive","manageStateFrameCallback","current","callbackId","useEffect","registerFrameCallback","unregisterFrameCallback"],"sources":["/Users/shayan/workspace/godfather/node_modules/react-native-reanimated/lib/module/reanimated2/hook/useFrameCallback.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport FrameCallbackRegistryJS from '../frameCallback/FrameCallbackRegistryJS';\nimport { FrameInfo } from '../frameCallback/FrameCallbackRegistryUI';\n\nexport type FrameCallback = {\n  setActive: (isActive: boolean) => void;\n  isActive: boolean;\n  callbackId: number;\n};\nconst frameCallbackRegistry = new FrameCallbackRegistryJS();\n\nexport function useFrameCallback(\n  callback: (frameInfo: FrameInfo) => void,\n  autostart = true\n): FrameCallback {\n  const ref = useRef<FrameCallback>({\n    setActive: (isActive: boolean) => {\n      frameCallbackRegistry.manageStateFrameCallback(\n        ref.current.callbackId,\n        isActive\n      );\n      ref.current.isActive = isActive;\n    },\n    isActive: autostart,\n    callbackId: -1,\n  });\n\n  useEffect(() => {\n    ref.current.callbackId =\n      frameCallbackRegistry.registerFrameCallback(callback);\n    ref.current.setActive(ref.current.isActive);\n\n    return () => {\n      frameCallbackRegistry.unregisterFrameCallback(ref.current.callbackId);\n      ref.current.callbackId = -1;\n    };\n  }, [callback, autostart]);\n\n  return ref.current;\n}\n"],"mappings":"sLAAA,IAAAA,MAAA,CAAAC,OAAA,UACA,IAAAC,wBAAA,CAAAC,sBAAA,CAAAF,OAAA,8CAQA,GAAM,CAAAG,qBAAqB,CAAG,GAAI,CAAAC,gCAAuB,EAAE,CAEpD,QAAS,CAAAC,gBAAgBA,CAC9BC,QAAwC,CAEzB,IADf,CAAAC,SAAS,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CAEhB,GAAM,CAAAG,GAAG,CAAG,GAAAC,aAAM,EAAgB,CAChCC,SAAS,CAAG,SAAAA,UAAAC,QAAiB,CAAK,CAChCX,qBAAqB,CAACY,wBAAwB,CAC5CJ,GAAG,CAACK,OAAO,CAACC,UAAU,CACtBH,QAAQ,CACT,CACDH,GAAG,CAACK,OAAO,CAACF,QAAQ,CAAGA,QAAQ,CACjC,CAAC,CACDA,QAAQ,CAAEP,SAAS,CACnBU,UAAU,CAAE,CAAC,CACf,CAAC,CAAC,CAEF,GAAAC,gBAAS,EAAC,UAAM,CACdP,GAAG,CAACK,OAAO,CAACC,UAAU,CACpBd,qBAAqB,CAACgB,qBAAqB,CAACb,QAAQ,CAAC,CACvDK,GAAG,CAACK,OAAO,CAACH,SAAS,CAACF,GAAG,CAACK,OAAO,CAACF,QAAQ,CAAC,CAE3C,MAAO,WAAM,CACXX,qBAAqB,CAACiB,uBAAuB,CAACT,GAAG,CAACK,OAAO,CAACC,UAAU,CAAC,CACrEN,GAAG,CAACK,OAAO,CAACC,UAAU,CAAG,CAAC,CAAC,CAC7B,CAAC,CACH,CAAC,CAAE,CAACX,QAAQ,CAAEC,SAAS,CAAC,CAAC,CAEzB,MAAO,CAAAI,GAAG,CAACK,OAAO,CACpB"},"metadata":{},"sourceType":"script","externalDependencies":[]}