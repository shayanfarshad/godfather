{"ast":null,"code":"Object.defineProperty(exports,\"__esModule\",{value:true});Object.defineProperty(exports,\"stopMapper\",{enumerable:true,get:function get(){return _mappers.stopMapper;}});exports.valueSetter=void 0;var _mappers=require(\"./mappers\");var _worklet_11313024012434_init_data={code:\"function valueSetter(sv,value){const previousAnimation=sv._animation;if(previousAnimation){previousAnimation.cancelled=true;sv._animation=null;}if(typeof value==='function'||value!==null&&typeof value==='object'&&value.onFrame!==undefined){const animation=typeof value==='function'?value():value;if(sv._value===animation.current&&!animation.isHigherOrder){animation.callback&&animation.callback(true);return;}const initializeAnimation=function(timestamp){animation.onStart(animation,sv.value,timestamp,previousAnimation);};const currentTimestamp=global.__frameTimestamp||performance.now();initializeAnimation(currentTimestamp);const step=function(timestamp){if(animation.cancelled){animation.callback&&animation.callback(false);return;}const finished=animation.onFrame(animation,timestamp);animation.finished=true;animation.timestamp=timestamp;sv._value=animation.current;if(finished){animation.callback&&animation.callback(true);}else{requestAnimationFrame(step);}};sv._animation=animation;step(currentTimestamp);}else{if(sv._value===value){return;}sv._value=value;}}\",location:\"node_modules/react-native-reanimated/lib/module/reanimated2/valueSetter.js\"};var valueSetter=exports.valueSetter=function(){var _f=function _f(sv,value){var previousAnimation=sv._animation;if(previousAnimation){previousAnimation.cancelled=true;sv._animation=null;}if(typeof value==='function'||value!==null&&typeof value==='object'&&value.onFrame!==undefined){var animation=typeof value==='function'?value():value;if(sv._value===animation.current&&!animation.isHigherOrder){animation.callback&&animation.callback(true);return;}var initializeAnimation=function initializeAnimation(timestamp){animation.onStart(animation,sv.value,timestamp,previousAnimation);};var currentTimestamp=global.__frameTimestamp||performance.now();initializeAnimation(currentTimestamp);var step=function step(timestamp){if(animation.cancelled){animation.callback&&animation.callback(false);return;}var finished=animation.onFrame(animation,timestamp);animation.finished=true;animation.timestamp=timestamp;sv._value=animation.current;if(finished){animation.callback&&animation.callback(true);}else{requestAnimationFrame(step);}};sv._animation=animation;step(currentTimestamp);}else{if(sv._value===value){return;}sv._value=value;}};_f._closure={};_f.__initData=_worklet_11313024012434_init_data;_f.__workletHash=11313024012434;return _f;}();","map":{"version":3,"names":["_mappers","require","_worklet_11313024012434_init_data","code","location","valueSetter","exports","_f","sv","value","previousAnimation","_animation","cancelled","onFrame","undefined","animation","_value","current","isHigherOrder","callback","initializeAnimation","timestamp","onStart","currentTimestamp","global","__frameTimestamp","performance","now","step","finished","requestAnimationFrame","_closure","__initData","__workletHash"],"sources":["/Users/shayan/workspace/godfather/node_modules/react-native-reanimated/lib/module/reanimated2/valueSetter.ts"],"sourcesContent":["import { AnimationObject, AnimatableValue } from './commonTypes';\nimport { Descriptor } from './hook/commonTypes';\nexport { stopMapper } from './mappers';\n\nexport function valueSetter(sv: any, value: any): void {\n  'worklet';\n  const previousAnimation = sv._animation;\n  if (previousAnimation) {\n    previousAnimation.cancelled = true;\n    sv._animation = null;\n  }\n  if (\n    typeof value === 'function' ||\n    (value !== null &&\n      typeof value === 'object' &&\n      (value as AnimationObject).onFrame !== undefined)\n  ) {\n    const animation: AnimationObject =\n      typeof value === 'function'\n        ? (value as () => AnimationObject)()\n        : (value as AnimationObject);\n    // prevent setting again to the same value\n    // and triggering the mappers that treat this value as an input\n    // this happens when the animation's target value(stored in animation.current until animation.onStart is called) is set to the same value as a current one(this._value)\n    // built in animations that are not higher order(withTiming, withSpring) hold target value in .current\n    if (sv._value === animation.current && !animation.isHigherOrder) {\n      animation.callback && animation.callback(true);\n      return;\n    }\n    // animated set\n    const initializeAnimation = (timestamp: number) => {\n      animation.onStart(animation, sv.value, timestamp, previousAnimation);\n    };\n    const currentTimestamp = global.__frameTimestamp || performance.now();\n    initializeAnimation(currentTimestamp);\n    const step = (timestamp: number) => {\n      if (animation.cancelled) {\n        animation.callback && animation.callback(false /* finished */);\n        return;\n      }\n      const finished = animation.onFrame(animation, timestamp);\n      animation.finished = true;\n      animation.timestamp = timestamp;\n      sv._value = animation.current;\n      if (finished) {\n        animation.callback && animation.callback(true /* finished */);\n      } else {\n        requestAnimationFrame(step);\n      }\n    };\n\n    sv._animation = animation;\n\n    step(currentTimestamp);\n  } else {\n    // prevent setting again to the same value\n    // and triggering the mappers that treat this value as an input\n    if (sv._value === value) {\n      return;\n    }\n    sv._value = value as Descriptor | AnimatableValue;\n  }\n}\n"],"mappings":"kMAEA,IAAAA,QAAA,CAAAC,OAAA,cAAsC,IAAAC,iCAAA,EAAAC,IAAA,gjCAAAC,QAAA,kFAEtB,CAAAC,WAAW,CAAAC,OAAA,CAAAD,WAAA,gBAAAE,EAAA,UAAAA,GAACC,EAAO,CAAEC,KAAU,CAAQ,CAErD,GAAM,CAAAC,iBAAiB,CAAGF,EAAE,CAACG,UAAU,CACvC,GAAID,iBAAiB,CAAE,CACrBA,iBAAiB,CAACE,SAAS,CAAG,IAAI,CAClCJ,EAAE,CAACG,UAAU,CAAG,IAAI,CACtB,CACA,GACE,MAAO,CAAAF,KAAK,GAAK,UAAU,EAC1BA,KAAK,GAAK,IAAI,EACb,MAAO,CAAAA,KAAK,GAAK,QAAQ,EACxBA,KAAK,CAAqBI,OAAO,GAAKC,SAAU,CACnD,CACA,GAAM,CAAAC,SAA0B,CAC9B,MAAO,CAAAN,KAAK,GAAK,UAAU,CACtBA,KAAK,EAA4B,CACjCA,KAAyB,CAKhC,GAAID,EAAE,CAACQ,MAAM,GAAKD,SAAS,CAACE,OAAO,EAAI,CAACF,SAAS,CAACG,aAAa,CAAE,CAC/DH,SAAS,CAACI,QAAQ,EAAIJ,SAAS,CAACI,QAAQ,CAAC,IAAI,CAAC,CAC9C,OACF,CAEA,GAAM,CAAAC,mBAAmB,CAAI,QAAvB,CAAAA,mBAAmBA,CAAIC,SAAiB,CAAK,CACjDN,SAAS,CAACO,OAAO,CAACP,SAAS,CAAEP,EAAE,CAACC,KAAK,CAAEY,SAAS,CAAEX,iBAAiB,CAAC,CACtE,CAAC,CACD,GAAM,CAAAa,gBAAgB,CAAGC,MAAM,CAACC,gBAAgB,EAAIC,WAAW,CAACC,GAAG,EAAE,CACrEP,mBAAmB,CAACG,gBAAgB,CAAC,CACrC,GAAM,CAAAK,IAAI,CAAI,QAAR,CAAAA,IAAIA,CAAIP,SAAiB,CAAK,CAClC,GAAIN,SAAS,CAACH,SAAS,CAAE,CACvBG,SAAS,CAACI,QAAQ,EAAIJ,SAAS,CAACI,QAAQ,CAAC,KAAM,CAAe,CAC9D,OACF,CACA,GAAM,CAAAU,QAAQ,CAAGd,SAAS,CAACF,OAAO,CAACE,SAAS,CAAEM,SAAS,CAAC,CACxDN,SAAS,CAACc,QAAQ,CAAG,IAAI,CACzBd,SAAS,CAACM,SAAS,CAAGA,SAAS,CAC/Bb,EAAE,CAACQ,MAAM,CAAGD,SAAS,CAACE,OAAO,CAC7B,GAAIY,QAAQ,CAAE,CACZd,SAAS,CAACI,QAAQ,EAAIJ,SAAS,CAACI,QAAQ,CAAC,IAAK,CAAe,CAC/D,CAAC,IAAM,CACLW,qBAAqB,CAACF,IAAI,CAAC,CAC7B,CACF,CAAC,CAEDpB,EAAE,CAACG,UAAU,CAAGI,SAAS,CAEzBa,IAAI,CAACL,gBAAgB,CAAC,CACxB,CAAC,IAAM,CAGL,GAAIf,EAAE,CAACQ,MAAM,GAAKP,KAAK,CAAE,CACvB,OACF,CACAD,EAAE,CAACQ,MAAM,CAAGP,KAAqC,CACnD,CACF,EAAAF,EAAA,CAAAwB,QAAA,IAAAxB,EAAA,CAAAyB,UAAA,CAAA9B,iCAAA,CAAAK,EAAA,CAAA0B,aAAA,uBAAA1B,EAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}