{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.translateWithOptions=exports.isFarsi=exports.changeLang=void 0;var _i18nJs=_interopRequireDefault(require(\"i18n-js\"));var _reactNative=require(\"react-native\");var _en=_interopRequireDefault(require(\"./en\"));var _fa=_interopRequireDefault(require(\"./fa\"));var _translate=require(\"./translate\");_i18nJs.default.fallbacks=true;function interpolateString(template,variables){return template.replace(/{([^{}]*)}/g,function(match,group){return variables[group]||match;});}var translateWithOptions=exports.translateWithOptions=function translateWithOptions(key,options){var translation=(0,_translate.translate)(key,options);if(options){return interpolateString(translation,options);}return translation;};_i18nJs.default.translations={fa:_fa.default,'en-IR':_fa.default,en:_en.default,'en-US':_en.default};var changeLang=exports.changeLang=function changeLang(lang){if(lang==='en-US'){_reactNative.I18nManager.forceRTL(false);}else{_reactNative.I18nManager.forceRTL(false);}if(lang){_i18nJs.default.locale=lang;}else{_i18nJs.default.locale='en-IR';}};var isFarsi=exports.isFarsi=_i18nJs.default.locale==='en-IR';","map":{"version":3,"names":["_i18nJs","_interopRequireDefault","require","_reactNative","_en","_fa","_translate","i18n","fallbacks","interpolateString","template","variables","replace","match","group","translateWithOptions","exports","key","options","translation","translate","translations","fa","en","changeLang","lang","I18nManager","forceRTL","locale","isFarsi","I18n"],"sources":["/Users/shayan/workspace/godfather/src/i18n/i18n.ts"],"sourcesContent":["// import * as Localization from \"expo-localization\"\nimport * as localization from 'react-native-localize';\nimport i18n from 'i18n-js';\nimport {I18nManager} from 'react-native';\n\n// if English isn't your default language, move Translations to the appropriate language file.\nimport en, {Translations} from './en';\nimport fa from './fa';\nimport I18n from 'i18n-js';\nimport {translate} from './translate';\n\ni18n.fallbacks = true;\n// i18next.init({\n//   fallbackLng: ['en', 'fa', 'en-IR', 'en-US'],\n// });\n\nfunction interpolateString(\n  template: string,\n  variables: Record<string, string>,\n): string {\n  return template.replace(/{([^{}]*)}/g, (match, group) => {\n    return variables[group] || match;\n  });\n}\n\n// Updated translation function\nexport const translateWithOptions = (\n  key: TxKeyPath,\n  options?: Record<string, string>,\n): string => {\n  const translation = translate(key, options);\n\n  if (options) {\n    return interpolateString(translation, options);\n  }\n\n  return translation;\n};\n/**\n * we need always include \"*-US\" for some valid language codes because when you change the system language,\n * the language code is the suffixed with \"-US\". i.e. if a device is set to English (\"en\"),\n * if you change to another language and then return to English language code is now \"en-US\".\n */\n\ni18n.translations = {fa, 'en-IR': fa, en, 'en-US': en};\n// export const loadLocale = async () => {\n//   for (const locale of localization.getLocales()) {\n//     if (i18n.translations[locale.languageCode] !== null) {\n//       console.log({locale});\n//       switch (locale.countryCode) {\n//         case 'US':\n//           import('./en.ts').then(en => {\n//             i18n.translations = {en};\n//           });\n//           break;\n//         default:\n//         case 'IR':\n//           import('./fa.ts').then(fa => {\n//             i18n.translations = {fa};\n//           });\n//           break;\n//       }\n//       break;\n//     }\n//   }\n// };\n// const locales = localization.getLocales();\n\n// i18n.locale = localization.getLocales()[0].languageTag;\n\nexport const changeLang = (lang: string) => {\n  if (lang === 'en-US') {\n    // I18nManager.allowRTL(false);\n    I18nManager.forceRTL(false);\n  } else {\n    // I18nManager.allowRTL(true);\n    I18nManager.forceRTL(false);\n  }\n  if (lang) {\n    i18n.locale = lang;\n  } else {\n    i18n.locale = 'en-IR';\n  }\n};\n\nexport const isFarsi = I18n.locale === 'en-IR';\n// handle RTL languages\n// export const isRTL = localization.getLocales()[0].languageTag;\n// console.log({isRTL})\n// I18nManager.allowRTL(isRTL === 'en-IR');\n// I18nManager.forceRTL(isRTL === 'en-IR');\n\n/**\n * Builds up valid keypaths for translations.\n */\nexport type TxKeyPath = RecursiveKeyOf<Translations>;\n\n// via: https://stackoverflow.com/a/65333050\ntype RecursiveKeyOf<TObj extends object> = {\n  [TKey in keyof TObj & (string | number)]: RecursiveKeyOfHandleValue<\n    TObj[TKey],\n    `${TKey}`\n  >;\n}[keyof TObj & (string | number)];\n\ntype RecursiveKeyOfInner<TObj extends object> = {\n  [TKey in keyof TObj & (string | number)]: RecursiveKeyOfHandleValue<\n    TObj[TKey],\n    `['${TKey}']` | `.${TKey}`\n  >;\n}[keyof TObj & (string | number)];\n\ntype RecursiveKeyOfHandleValue<\n  TValue,\n  Text extends string,\n> = TValue extends any[]\n  ? Text\n  : TValue extends object\n  ? Text | `${Text}${RecursiveKeyOfInner<TValue>}`\n  : Text;\n"],"mappings":"mNAEA,IAAAA,OAAA,CAAAC,sBAAA,CAAAC,OAAA,aACA,IAAAC,YAAA,CAAAD,OAAA,iBAGA,IAAAE,GAAA,CAAAH,sBAAA,CAAAC,OAAA,UACA,IAAAG,GAAA,CAAAJ,sBAAA,CAAAC,OAAA,UAEA,IAAAI,UAAA,CAAAJ,OAAA,gBAEAK,eAAI,CAACC,SAAS,CAAG,IAAI,CAKrB,QAAS,CAAAC,iBAAiBA,CACxBC,QAAgB,CAChBC,SAAiC,CACzB,CACR,MAAO,CAAAD,QAAQ,CAACE,OAAO,CAAC,aAAa,CAAE,SAACC,KAAK,CAAEC,KAAK,CAAK,CACvD,MAAO,CAAAH,SAAS,CAACG,KAAK,CAAC,EAAID,KAAK,CAClC,CAAC,CAAC,CACJ,CAGO,GAAM,CAAAE,oBAAoB,CAAAC,OAAA,CAAAD,oBAAA,CAAG,QAAvB,CAAAA,oBAAoBA,CAC/BE,GAAc,CACdC,OAAgC,CACrB,CACX,GAAM,CAAAC,WAAW,CAAG,GAAAC,oBAAS,EAACH,GAAG,CAAEC,OAAO,CAAC,CAE3C,GAAIA,OAAO,CAAE,CACX,MAAO,CAAAT,iBAAiB,CAACU,WAAW,CAAED,OAAO,CAAC,CAChD,CAEA,MAAO,CAAAC,WAAW,CACpB,CAAC,CAODZ,eAAI,CAACc,YAAY,CAAG,CAACC,EAAE,CAAFA,WAAE,CAAE,OAAO,CAAEA,WAAE,CAAEC,EAAE,CAAFA,WAAE,CAAE,OAAO,CAAEA,WAAE,CAAC,CA0B/C,GAAM,CAAAC,UAAU,CAAAR,OAAA,CAAAQ,UAAA,CAAG,QAAb,CAAAA,UAAUA,CAAIC,IAAY,CAAK,CAC1C,GAAIA,IAAI,GAAK,OAAO,CAAE,CAEpBC,wBAAW,CAACC,QAAQ,CAAC,KAAK,CAAC,CAC7B,CAAC,IAAM,CAELD,wBAAW,CAACC,QAAQ,CAAC,KAAK,CAAC,CAC7B,CACA,GAAIF,IAAI,CAAE,CACRlB,eAAI,CAACqB,MAAM,CAAGH,IAAI,CACpB,CAAC,IAAM,CACLlB,eAAI,CAACqB,MAAM,CAAG,OAAO,CACvB,CACF,CAAC,CAEM,GAAM,CAAAC,OAAO,CAAAb,OAAA,CAAAa,OAAA,CAAGC,eAAI,CAACF,MAAM,GAAK,OAAO"},"metadata":{},"sourceType":"script","externalDependencies":[]}