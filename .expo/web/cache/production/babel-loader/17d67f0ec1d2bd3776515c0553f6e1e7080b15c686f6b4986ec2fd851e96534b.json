{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.SharedTransition=exports.DefaultSharedTransition=void 0;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _animation=require(\"../../animation\");function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,\"string\");return typeof key===\"symbol\"?key:String(key);}function _toPrimitive(input,hint){if(typeof input!==\"object\"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||\"default\");if(typeof res!==\"object\")return res;throw new TypeError(\"@@toPrimitive must return a primitive value.\");}return(hint===\"string\"?String:Number)(input);}var supportedProps=['width','height','originX','originY','transform'];var _worklet_15213110450447_init_data={code:\"function anonymous(values){const{animationFactory,supportedProps,withTiming,animationDuration}=this._closure;let animations={};const initialValues={};if(animationFactory){animations=animationFactory(values);for(const key in animations){if(!supportedProps.includes(key)){throw Error(\\\"The prop '\\\"+key+\\\"' is not supported yet.\\\");}}}else{for(const propName of supportedProps){if(propName==='transform'){const matrix=values.targetTransformMatrix;animations.transformMatrix=withTiming(matrix,{duration:animationDuration});}else{const keyToTargetValue='target'+propName.charAt(0).toUpperCase()+propName.slice(1);animations[propName]=withTiming(values[keyToTargetValue],{duration:animationDuration});}}}for(const propName in animations){if(propName==='transform'){initialValues.transformMatrix=values.currentTransformMatrix;}else{const keyToCurrentValue='current'+propName.charAt(0).toUpperCase()+propName.slice(1);initialValues[propName]=values[keyToCurrentValue];}}return{initialValues:initialValues,animations:animations};}\",location:\"node_modules/react-native-reanimated/lib/module/reanimated2/layoutReanimation/sharedTransitions/index.js\"};var SharedTransition=exports.SharedTransition=function(){function SharedTransition(){(0,_classCallCheck2.default)(this,SharedTransition);_defineProperty(this,\"animationFactory\",null);_defineProperty(this,\"defaultDuration\",500);}(0,_createClass2.default)(SharedTransition,[{key:\"custom\",value:function custom(animationFactory){this.animationFactory=animationFactory;return this;}},{key:\"build\",value:function build(){var animationFactory=this.animationFactory;var animationDuration=this.defaultDuration;return function(){var _f=function _f(values){var animations={};var initialValues={};if(animationFactory){animations=animationFactory(values);for(var key in animations){if(!supportedProps.includes(key)){throw Error(\"The prop '\"+key+\"' is not supported yet.\");}}}else{for(var _i=0,_supportedProps=supportedProps;_i<_supportedProps.length;_i++){var propName=_supportedProps[_i];if(propName==='transform'){var matrix=values.targetTransformMatrix;animations.transformMatrix=(0,_animation.withTiming)(matrix,{duration:animationDuration});}else{var keyToTargetValue='target'+propName.charAt(0).toUpperCase()+propName.slice(1);animations[propName]=(0,_animation.withTiming)(values[keyToTargetValue],{duration:animationDuration});}}}for(var _propName in animations){if(_propName==='transform'){initialValues.transformMatrix=values.currentTransformMatrix;}else{var keyToCurrentValue='current'+_propName.charAt(0).toUpperCase()+_propName.slice(1);initialValues[_propName]=values[keyToCurrentValue];}}return{initialValues:initialValues,animations:animations};};_f._closure={animationFactory:animationFactory,supportedProps:supportedProps,withTiming:_animation.withTiming,animationDuration:animationDuration};_f.__initData=_worklet_15213110450447_init_data;_f.__workletHash=15213110450447;return _f;}();}}],[{key:\"createInstance\",value:function createInstance(){return new SharedTransition();}},{key:\"custom\",value:function custom(animationFactory){return this.createInstance().custom(animationFactory);}},{key:\"build\",value:function build(){return this.createInstance().build();}}]);return SharedTransition;}();var DefaultSharedTransition=exports.DefaultSharedTransition=SharedTransition;","map":{"version":3,"names":["_animation","require","supportedProps","_worklet_15213110450447_init_data","code","location","SharedTransition","exports","_classCallCheck2","default","_defineProperty","_createClass2","key","value","custom","animationFactory","build","animationDuration","defaultDuration","_f","values","animations","initialValues","includes","Error","_i","_supportedProps","length","propName","matrix","targetTransformMatrix","transformMatrix","withTiming","duration","keyToTargetValue","charAt","toUpperCase","slice","currentTransformMatrix","keyToCurrentValue","_closure","__initData","__workletHash","createInstance","DefaultSharedTransition"],"sources":["/Users/shayan/workspace/godfather/node_modules/react-native-reanimated/lib/module/reanimated2/layoutReanimation/sharedTransitions/index.ts"],"sourcesContent":["import { withTiming } from '../../animation';\nimport {\n  ILayoutAnimationBuilder,\n  LayoutAnimationFunction,\n  LayoutAnimationsValues,\n} from '../animationBuilder/commonTypes';\nimport { StyleProps } from '../../commonTypes';\n\nconst supportedProps = ['width', 'height', 'originX', 'originY', 'transform'];\n\ntype AnimationFactoryType = (values: LayoutAnimationsValues) => StyleProps;\n\nexport class SharedTransition implements ILayoutAnimationBuilder {\n  animationFactory: AnimationFactoryType | null = null;\n  defaultDuration = 500;\n\n  static createInstance(): SharedTransition {\n    return new SharedTransition();\n  }\n\n  static custom(animationFactory: AnimationFactoryType): SharedTransition {\n    return this.createInstance().custom(animationFactory);\n  }\n\n  custom(animationFactory: AnimationFactoryType): SharedTransition {\n    this.animationFactory = animationFactory;\n    return this;\n  }\n\n  static build(): LayoutAnimationFunction {\n    return this.createInstance().build();\n  }\n\n  build(): LayoutAnimationFunction {\n    const animationFactory = this.animationFactory;\n    const animationDuration = this.defaultDuration;\n    return (values: LayoutAnimationsValues) => {\n      'worklet';\n      let animations: {\n        [key: string]: any;\n      } = {};\n      const initialValues: {\n        [key: string]: any;\n      } = {};\n\n      if (animationFactory) {\n        animations = animationFactory(values);\n        for (const key in animations) {\n          if (!supportedProps.includes(key)) {\n            throw Error(`The prop '${key}' is not supported yet.`);\n          }\n        }\n      } else {\n        for (const propName of supportedProps) {\n          if (propName === 'transform') {\n            const matrix = values.targetTransformMatrix;\n            animations.transformMatrix = withTiming(matrix, {\n              // native screen transition takes around 500ms\n              duration: animationDuration,\n            });\n          } else {\n            const keyToTargetValue =\n              'target' + propName.charAt(0).toUpperCase() + propName.slice(1);\n            animations[propName] = withTiming(values[keyToTargetValue], {\n              // native screen transition takes around 500ms\n              duration: animationDuration,\n            });\n          }\n        }\n      }\n\n      for (const propName in animations) {\n        if (propName === 'transform') {\n          initialValues.transformMatrix = values.currentTransformMatrix;\n        } else {\n          const keyToCurrentValue =\n            'current' + propName.charAt(0).toUpperCase() + propName.slice(1);\n          initialValues[propName] = values[keyToCurrentValue];\n        }\n      }\n\n      return { initialValues, animations };\n    };\n  }\n}\n\nexport const DefaultSharedTransition = SharedTransition;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}