{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.SharedTransition=void 0;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _animation=require(\"../../animation\");var _commonTypes=require(\"../animationBuilder/commonTypes\");var _commonTypes2=require(\"../../commonTypes\");var _core=require(\"../../core\");var _ProgressTransitionManager=require(\"./ProgressTransitionManager\");function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,\"string\");return typeof key===\"symbol\"?key:String(key);}function _toPrimitive(input,hint){if(typeof input!==\"object\"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||\"default\");if(typeof res!==\"object\")return res;throw new TypeError(\"@@toPrimitive must return a primitive value.\");}return(hint===\"string\"?String:Number)(input);}var SUPPORTED_PROPS=['width','height','originX','originY','transform','borderRadius'];var _worklet_1383153354179_init_data={code:\"function anonymous(viewTag,values,progress){const{progressAnimationCallback}=this.__closure;const newStyles=progressAnimationCallback(values,progress);_notifyAboutProgress(viewTag,newStyles,true);}\"};var _worklet_3701396076733_init_data={code:\"function anonymous(values){const{animationFactory,SUPPORTED_PROPS,withTiming,reduceMotion,transitionDuration}=this.__closure;let animations={};const initialValues={};if(animationFactory){animations=animationFactory(values);for(const key in animations){if(!SUPPORTED_PROPS.includes(key)){throw new Error(\\\"[Reanimated] The prop '\\\"+key+\\\"' is not supported yet.\\\");}}}else{for(const propName of SUPPORTED_PROPS){if(propName==='transform'){const matrix=values.targetTransformMatrix;animations.transformMatrix=withTiming(matrix,{reduceMotion:reduceMotion,duration:transitionDuration});}else{const capitalizedPropName=\\\"\\\"+propName.charAt(0).toUpperCase()+propName.slice(1);const keyToTargetValue=\\\"target\\\"+capitalizedPropName;animations[propName]=withTiming(values[keyToTargetValue],{reduceMotion:reduceMotion,duration:transitionDuration});}}}for(const propName in animations){if(propName==='transform'){initialValues.transformMatrix=values.currentTransformMatrix;}else{const capitalizedPropName=propName.charAt(0).toUpperCase()+propName.slice(1);const keyToCurrentValue=\\\"current\\\"+capitalizedPropName;initialValues[propName]=values[keyToCurrentValue];}}return{initialValues:initialValues,animations:animations};}\"};var _worklet_17341825136347_init_data={code:\"function anonymous(viewTag,values,progress){const{SUPPORTED_PROPS}=this.__closure;const newStyles={};for(const propertyName of SUPPORTED_PROPS){if(propertyName==='transform'){const currentMatrix=values.currentTransformMatrix;const targetMatrix=values.targetTransformMatrix;const newMatrix=new Array(9);for(let i=0;i<9;i++){newMatrix[i]=progress*(targetMatrix[i]-currentMatrix[i])+currentMatrix[i];}newStyles.transformMatrix=newMatrix;}else{const PropertyName=propertyName.charAt(0).toUpperCase()+propertyName.slice(1);const currentPropertyName=\\\"current\\\"+PropertyName;const targetPropertyName=\\\"target\\\"+PropertyName;const currentValue=values[currentPropertyName];const targetValue=values[targetPropertyName];newStyles[propertyName]=progress*(targetValue-currentValue)+currentValue;}}_notifyAboutProgress(viewTag,newStyles,true);}\"};var SharedTransition=exports.SharedTransition=function(){function SharedTransition(){(0,_classCallCheck2.default)(this,SharedTransition);_defineProperty(this,\"_customAnimationFactory\",null);_defineProperty(this,\"_animation\",null);_defineProperty(this,\"_transitionDuration\",500);_defineProperty(this,\"_reduceMotion\",_commonTypes2.ReduceMotion.System);_defineProperty(this,\"_customProgressAnimation\",undefined);_defineProperty(this,\"_progressAnimation\",undefined);_defineProperty(this,\"_defaultTransitionType\",undefined);}(0,_createClass2.default)(SharedTransition,[{key:\"custom\",value:function custom(customAnimationFactory){this._customAnimationFactory=customAnimationFactory;return this;}},{key:\"progressAnimation\",value:function progressAnimation(progressAnimationCallback){this._customProgressAnimation=function(){var anonymous=function anonymous(viewTag,values,progress){var newStyles=progressAnimationCallback(values,progress);_notifyAboutProgress(viewTag,newStyles,true);};anonymous.__closure={progressAnimationCallback:progressAnimationCallback};anonymous.__initData=_worklet_1383153354179_init_data;anonymous.__workletHash=1383153354179;return anonymous;}();return this;}},{key:\"duration\",value:function duration(_duration){this._transitionDuration=_duration;return this;}},{key:\"reduceMotion\",value:function reduceMotion(_reduceMotion){this._reduceMotion=_reduceMotion;return this;}},{key:\"defaultTransitionType\",value:function defaultTransitionType(transitionType){this._defaultTransitionType=transitionType;return this;}},{key:\"registerTransition\",value:function registerTransition(viewTag,sharedTransitionTag){var transitionAnimation=this.getTransitionAnimation();var progressAnimation=this.getProgressAnimation();if(!this._defaultTransitionType){if(this._customAnimationFactory&&!this._customProgressAnimation){this._defaultTransitionType=_commonTypes.SharedTransitionType.ANIMATION;}else{this._defaultTransitionType=_commonTypes.SharedTransitionType.PROGRESS_ANIMATION;}}var layoutAnimationType=this._defaultTransitionType===_commonTypes.SharedTransitionType.ANIMATION?_commonTypes.LayoutAnimationType.SHARED_ELEMENT_TRANSITION:_commonTypes.LayoutAnimationType.SHARED_ELEMENT_TRANSITION_PROGRESS;(0,_core.configureLayoutAnimations)(viewTag,layoutAnimationType,transitionAnimation,sharedTransitionTag);SharedTransition._progressTransitionManager.addProgressAnimation(viewTag,progressAnimation);}},{key:\"unregisterTransition\",value:function unregisterTransition(viewTag){SharedTransition._progressTransitionManager.removeProgressAnimation(viewTag);}},{key:\"getReduceMotion\",value:function getReduceMotion(){return this._reduceMotion;}},{key:\"getTransitionAnimation\",value:function getTransitionAnimation(){if(!this._animation){this.buildAnimation();}return this._animation;}},{key:\"getProgressAnimation\",value:function getProgressAnimation(){if(!this._progressAnimation){this.buildProgressAnimation();}return this._progressAnimation;}},{key:\"buildAnimation\",value:function buildAnimation(){var animationFactory=this._customAnimationFactory;var transitionDuration=this._transitionDuration;var reduceMotion=this._reduceMotion;this._animation=function(){var anonymous=function anonymous(values){var animations={};var initialValues={};if(animationFactory){animations=animationFactory(values);for(var key in animations){if(!SUPPORTED_PROPS.includes(key)){throw new Error(\"[Reanimated] The prop '\"+key+\"' is not supported yet.\");}}}else{for(var _i=0,_SUPPORTED_PROPS=SUPPORTED_PROPS;_i<_SUPPORTED_PROPS.length;_i++){var propName=_SUPPORTED_PROPS[_i];if(propName==='transform'){var matrix=values.targetTransformMatrix;animations.transformMatrix=(0,_animation.withTiming)(matrix,{reduceMotion:reduceMotion,duration:transitionDuration});}else{var capitalizedPropName=\"\"+propName.charAt(0).toUpperCase()+propName.slice(1);var keyToTargetValue=\"target\"+capitalizedPropName;animations[propName]=(0,_animation.withTiming)(values[keyToTargetValue],{reduceMotion:reduceMotion,duration:transitionDuration});}}}for(var _propName in animations){if(_propName==='transform'){initialValues.transformMatrix=values.currentTransformMatrix;}else{var _capitalizedPropName=_propName.charAt(0).toUpperCase()+_propName.slice(1);var keyToCurrentValue=\"current\"+_capitalizedPropName;initialValues[_propName]=values[keyToCurrentValue];}}return{initialValues:initialValues,animations:animations};};anonymous.__closure={animationFactory:animationFactory,SUPPORTED_PROPS:SUPPORTED_PROPS,withTiming:_animation.withTiming,reduceMotion:reduceMotion,transitionDuration:transitionDuration};anonymous.__initData=_worklet_3701396076733_init_data;anonymous.__workletHash=3701396076733;return anonymous;}();}},{key:\"buildProgressAnimation\",value:function buildProgressAnimation(){if(this._customProgressAnimation){this._progressAnimation=this._customProgressAnimation;return;}this._progressAnimation=function(){var anonymous=function anonymous(viewTag,values,progress){var newStyles={};for(var _i2=0,_SUPPORTED_PROPS2=SUPPORTED_PROPS;_i2<_SUPPORTED_PROPS2.length;_i2++){var propertyName=_SUPPORTED_PROPS2[_i2];if(propertyName==='transform'){var currentMatrix=values.currentTransformMatrix;var targetMatrix=values.targetTransformMatrix;var newMatrix=new Array(9);for(var i=0;i<9;i++){newMatrix[i]=progress*(targetMatrix[i]-currentMatrix[i])+currentMatrix[i];}newStyles.transformMatrix=newMatrix;}else{var PropertyName=propertyName.charAt(0).toUpperCase()+propertyName.slice(1);var currentPropertyName=\"current\"+PropertyName;var targetPropertyName=\"target\"+PropertyName;var currentValue=values[currentPropertyName];var targetValue=values[targetPropertyName];newStyles[propertyName]=progress*(targetValue-currentValue)+currentValue;}}_notifyAboutProgress(viewTag,newStyles,true);};anonymous.__closure={SUPPORTED_PROPS:SUPPORTED_PROPS};anonymous.__initData=_worklet_17341825136347_init_data;anonymous.__workletHash=17341825136347;return anonymous;}();}}],[{key:\"custom\",value:function custom(customAnimationFactory){return new SharedTransition().custom(customAnimationFactory);}},{key:\"duration\",value:function duration(_duration2){return new SharedTransition().duration(_duration2);}},{key:\"progressAnimation\",value:function progressAnimation(progressAnimationCallback){return new SharedTransition().progressAnimation(progressAnimationCallback);}},{key:\"defaultTransitionType\",value:function defaultTransitionType(transitionType){return new SharedTransition().defaultTransitionType(transitionType);}},{key:\"reduceMotion\",value:function reduceMotion(_reduceMotion){return new SharedTransition().reduceMotion(_reduceMotion);}}]);return SharedTransition;}();_defineProperty(SharedTransition,\"_progressTransitionManager\",new _ProgressTransitionManager.ProgressTransitionManager());","map":{"version":3,"names":["_animation","require","_commonTypes","_commonTypes2","_core","_ProgressTransitionManager","SUPPORTED_PROPS","_worklet_1383153354179_init_data","code","_worklet_3701396076733_init_data","_worklet_17341825136347_init_data","SharedTransition","exports","_classCallCheck2","default","_defineProperty","ReduceMotion","System","undefined","_createClass2","key","value","custom","customAnimationFactory","_customAnimationFactory","progressAnimation","progressAnimationCallback","_customProgressAnimation","anonymous","viewTag","values","progress","newStyles","_notifyAboutProgress","__closure","duration","_transitionDuration","reduceMotion","_reduceMotion","defaultTransitionType","transitionType","_defaultTransitionType","registerTransition","sharedTransitionTag","transitionAnimation","getTransitionAnimation","getProgressAnimation","SharedTransitionType","ANIMATION","PROGRESS_ANIMATION","layoutAnimationType","LayoutAnimationType","SHARED_ELEMENT_TRANSITION","SHARED_ELEMENT_TRANSITION_PROGRESS","configureLayoutAnimations","_progressTransitionManager","addProgressAnimation","unregisterTransition","removeProgressAnimation","getReduceMotion","buildAnimation","_progressAnimation","buildProgressAnimation","animationFactory","transitionDuration","animations","initialValues","includes","Error","_i","_SUPPORTED_PROPS","length","propName","matrix","targetTransformMatrix","transformMatrix","withTiming","capitalizedPropName","charAt","toUpperCase","slice","keyToTargetValue","currentTransformMatrix","keyToCurrentValue","__initData","__workletHash","_i2","_SUPPORTED_PROPS2","propertyName","currentMatrix","targetMatrix","newMatrix","Array","i","PropertyName","currentPropertyName","targetPropertyName","currentValue","targetValue","ProgressTransitionManager"],"sources":["/Users/shayan/workspace/godfather/node_modules/react-native-reanimated/lib/module/reanimated2/layoutReanimation/sharedTransitions/SharedTransition.ts"],"sourcesContent":["import { withTiming } from '../../animation';\nimport type {\n  SharedTransitionAnimationsFunction,\n  SharedTransitionAnimationsValues,\n  CustomProgressAnimation,\n  ProgressAnimation,\n  LayoutAnimationsOptions,\n} from '../animationBuilder/commonTypes';\nimport {\n  LayoutAnimationType,\n  SharedTransitionType,\n} from '../animationBuilder/commonTypes';\nimport type { StyleProps } from '../../commonTypes';\nimport { ReduceMotion } from '../../commonTypes';\nimport { configureLayoutAnimations } from '../../core';\nimport { ProgressTransitionManager } from './ProgressTransitionManager';\n\nconst SUPPORTED_PROPS = [\n  'width',\n  'height',\n  'originX',\n  'originY',\n  'transform',\n  'borderRadius',\n] as const;\n\ntype AnimationFactory = (\n  values: SharedTransitionAnimationsValues\n) => StyleProps;\n\nexport class SharedTransition {\n  private _customAnimationFactory: AnimationFactory | null = null;\n  private _animation: SharedTransitionAnimationsFunction | null = null;\n  private _transitionDuration = 500;\n  private _reduceMotion: ReduceMotion = ReduceMotion.System;\n  private _customProgressAnimation?: ProgressAnimation = undefined;\n  private _progressAnimation?: ProgressAnimation = undefined;\n  private _defaultTransitionType?: SharedTransitionType = undefined;\n  private static _progressTransitionManager = new ProgressTransitionManager();\n\n  public custom(customAnimationFactory: AnimationFactory): SharedTransition {\n    this._customAnimationFactory = customAnimationFactory;\n    return this;\n  }\n\n  public progressAnimation(\n    progressAnimationCallback: CustomProgressAnimation\n  ): SharedTransition {\n    this._customProgressAnimation = (viewTag, values, progress) => {\n      'worklet';\n      const newStyles = progressAnimationCallback(values, progress);\n      _notifyAboutProgress(viewTag, newStyles, true);\n    };\n    return this;\n  }\n\n  public duration(duration: number): SharedTransition {\n    this._transitionDuration = duration;\n    return this;\n  }\n\n  public reduceMotion(_reduceMotion: ReduceMotion): this {\n    this._reduceMotion = _reduceMotion;\n    return this;\n  }\n\n  public defaultTransitionType(\n    transitionType: SharedTransitionType\n  ): SharedTransition {\n    this._defaultTransitionType = transitionType;\n    return this;\n  }\n\n  public registerTransition(\n    viewTag: number,\n    sharedTransitionTag: string\n  ): void {\n    const transitionAnimation = this.getTransitionAnimation();\n    const progressAnimation = this.getProgressAnimation();\n    if (!this._defaultTransitionType) {\n      if (this._customAnimationFactory && !this._customProgressAnimation) {\n        this._defaultTransitionType = SharedTransitionType.ANIMATION;\n      } else {\n        this._defaultTransitionType = SharedTransitionType.PROGRESS_ANIMATION;\n      }\n    }\n    const layoutAnimationType =\n      this._defaultTransitionType === SharedTransitionType.ANIMATION\n        ? LayoutAnimationType.SHARED_ELEMENT_TRANSITION\n        : LayoutAnimationType.SHARED_ELEMENT_TRANSITION_PROGRESS;\n    configureLayoutAnimations(\n      viewTag,\n      layoutAnimationType,\n      transitionAnimation,\n      sharedTransitionTag\n    );\n    SharedTransition._progressTransitionManager.addProgressAnimation(\n      viewTag,\n      progressAnimation\n    );\n  }\n\n  public unregisterTransition(viewTag: number): void {\n    SharedTransition._progressTransitionManager.removeProgressAnimation(\n      viewTag\n    );\n  }\n\n  public getReduceMotion(): ReduceMotion {\n    return this._reduceMotion;\n  }\n\n  private getTransitionAnimation(): SharedTransitionAnimationsFunction {\n    if (!this._animation) {\n      this.buildAnimation();\n    }\n    return this._animation!;\n  }\n\n  private getProgressAnimation(): ProgressAnimation {\n    if (!this._progressAnimation) {\n      this.buildProgressAnimation();\n    }\n    return this._progressAnimation!;\n  }\n\n  private buildAnimation() {\n    const animationFactory = this._customAnimationFactory;\n    const transitionDuration = this._transitionDuration;\n    const reduceMotion = this._reduceMotion;\n    this._animation = (values: SharedTransitionAnimationsValues) => {\n      'worklet';\n      let animations: {\n        [key: string]: any;\n      } = {};\n      const initialValues: {\n        [key: string]: any;\n      } = {};\n\n      if (animationFactory) {\n        animations = animationFactory(values);\n        for (const key in animations) {\n          if (!(SUPPORTED_PROPS as readonly string[]).includes(key)) {\n            throw new Error(\n              `[Reanimated] The prop '${key}' is not supported yet.`\n            );\n          }\n        }\n      } else {\n        for (const propName of SUPPORTED_PROPS) {\n          if (propName === 'transform') {\n            const matrix = values.targetTransformMatrix;\n            animations.transformMatrix = withTiming(matrix, {\n              reduceMotion,\n              duration: transitionDuration,\n            });\n          } else {\n            const capitalizedPropName = `${propName\n              .charAt(0)\n              .toUpperCase()}${propName.slice(\n              1\n            )}` as Capitalize<LayoutAnimationsOptions>;\n            const keyToTargetValue = `target${capitalizedPropName}` as const;\n            animations[propName] = withTiming(values[keyToTargetValue], {\n              reduceMotion,\n              duration: transitionDuration,\n            });\n          }\n        }\n      }\n\n      for (const propName in animations) {\n        if (propName === 'transform') {\n          initialValues.transformMatrix = values.currentTransformMatrix;\n        } else {\n          const capitalizedPropName = (propName.charAt(0).toUpperCase() +\n            propName.slice(1)) as Capitalize<LayoutAnimationsOptions>;\n          const keyToCurrentValue = `current${capitalizedPropName}` as const;\n          initialValues[propName] = values[keyToCurrentValue];\n        }\n      }\n\n      return { initialValues, animations };\n    };\n  }\n\n  private buildProgressAnimation() {\n    if (this._customProgressAnimation) {\n      this._progressAnimation = this._customProgressAnimation;\n      return;\n    }\n    this._progressAnimation = (viewTag, values, progress) => {\n      'worklet';\n      const newStyles: { [key: string]: number | number[] } = {};\n      for (const propertyName of SUPPORTED_PROPS) {\n        if (propertyName === 'transform') {\n          // this is not the perfect solution, but at this moment it just interpolates the whole\n          // matrix instead of interpolating scale, translate, rotate, etc. separately\n          const currentMatrix = values.currentTransformMatrix as number[];\n          const targetMatrix = values.targetTransformMatrix as number[];\n          const newMatrix = new Array(9);\n          for (let i = 0; i < 9; i++) {\n            newMatrix[i] =\n              progress * (targetMatrix[i] - currentMatrix[i]) +\n              currentMatrix[i];\n          }\n          newStyles.transformMatrix = newMatrix;\n        } else {\n          // PropertyName == propertyName with capitalized fist letter, (width -> Width)\n          const PropertyName = (propertyName.charAt(0).toUpperCase() +\n            propertyName.slice(1)) as Capitalize<LayoutAnimationsOptions>;\n          const currentPropertyName = `current${PropertyName}` as const;\n          const targetPropertyName = `target${PropertyName}` as const;\n\n          const currentValue = values[currentPropertyName];\n          const targetValue = values[targetPropertyName];\n\n          newStyles[propertyName] =\n            progress * (targetValue - currentValue) + currentValue;\n        }\n      }\n      _notifyAboutProgress(viewTag, newStyles, true);\n    };\n  }\n\n  // static builder methods\n\n  public static custom(\n    customAnimationFactory: AnimationFactory\n  ): SharedTransition {\n    return new SharedTransition().custom(customAnimationFactory);\n  }\n\n  public static duration(duration: number): SharedTransition {\n    return new SharedTransition().duration(duration);\n  }\n\n  public static progressAnimation(\n    progressAnimationCallback: CustomProgressAnimation\n  ): SharedTransition {\n    return new SharedTransition().progressAnimation(progressAnimationCallback);\n  }\n\n  public static defaultTransitionType(\n    transitionType: SharedTransitionType\n  ): SharedTransition {\n    return new SharedTransition().defaultTransitionType(transitionType);\n  }\n\n  public static reduceMotion(_reduceMotion: ReduceMotion): SharedTransition {\n    return new SharedTransition().reduceMotion(_reduceMotion);\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}