{"ast":null,"code":"Object.defineProperty(exports,\"__esModule\",{value:true});exports.makeViewDescriptorsSet=makeViewDescriptorsSet;exports.makeViewsRefSet=makeViewsRefSet;var _react=require(\"react\");var _core=require(\"./core\");var _worklet_4365650429626_init_data={code:\"function anonymous(descriptors){const{item}=this.__closure;const index=descriptors.findIndex(function(descriptor){return descriptor.tag===item.tag;});if(index!==-1){descriptors[index]=item;}else{descriptors.push(item);}return descriptors;}\"};var _worklet_6739515972732_init_data={code:\"function anonymous(descriptors){const{viewTag}=this.__closure;const index=descriptors.findIndex(function(descriptor){return descriptor.tag===viewTag;});if(index!==-1){descriptors.splice(index,1);}return descriptors;}\"};function makeViewDescriptorsSet(){var sharableViewDescriptors=(0,_core.makeMutable)([]);var data={sharableViewDescriptors:sharableViewDescriptors,add:function add(item){sharableViewDescriptors.modify(function(){var anonymous=function anonymous(descriptors){var index=descriptors.findIndex(function(descriptor){return descriptor.tag===item.tag;});if(index!==-1){descriptors[index]=item;}else{descriptors.push(item);}return descriptors;};anonymous.__closure={item:item};anonymous.__initData=_worklet_4365650429626_init_data;anonymous.__workletHash=4365650429626;return anonymous;}());},remove:function remove(viewTag){sharableViewDescriptors.modify(function(){var anonymous=function anonymous(descriptors){var index=descriptors.findIndex(function(descriptor){return descriptor.tag===viewTag;});if(index!==-1){descriptors.splice(index,1);}return descriptors;};anonymous.__closure={viewTag:viewTag};anonymous.__initData=_worklet_6739515972732_init_data;anonymous.__workletHash=6739515972732;return anonymous;}());}};return data;}function makeViewsRefSet(){var ref=(0,_react.useRef)(null);if(ref.current===null){var data={items:new Set(),add:function add(item){if(data.items.has(item))return;data.items.add(item);},remove:function remove(item){data.items.delete(item);}};ref.current=data;}return ref.current;}","map":{"version":3,"names":["_react","require","_core","_worklet_4365650429626_init_data","code","_worklet_6739515972732_init_data","makeViewDescriptorsSet","sharableViewDescriptors","makeMutable","data","add","item","modify","anonymous","descriptors","index","findIndex","descriptor","tag","push","__closure","__initData","__workletHash","remove","viewTag","splice","makeViewsRefSet","ref","useRef","current","items","Set","has","delete"],"sources":["/Users/shayan/workspace/godfather/node_modules/react-native-reanimated/lib/module/reanimated2/ViewDescriptorsSet.ts"],"sourcesContent":["import { useRef } from 'react';\nimport { makeMutable } from './core';\nimport type { SharedValue } from './commonTypes';\nimport type { Descriptor } from './hook/commonTypes';\n\nexport interface ViewRefSet<T> {\n  items: Set<T>;\n  add: (item: T) => void;\n  remove: (item: T) => void;\n}\n\nexport interface ViewDescriptorsSet {\n  sharableViewDescriptors: SharedValue<Descriptor[]>;\n  add: (item: Descriptor) => void;\n  remove: (viewTag: number) => void;\n}\n\nexport function makeViewDescriptorsSet(): ViewDescriptorsSet {\n  const sharableViewDescriptors = makeMutable<Descriptor[]>([]);\n  const data: ViewDescriptorsSet = {\n    sharableViewDescriptors,\n    add: (item: Descriptor) => {\n      sharableViewDescriptors.modify((descriptors: Descriptor[]) => {\n        'worklet';\n        const index = descriptors.findIndex(\n          (descriptor) => descriptor.tag === item.tag\n        );\n        if (index !== -1) {\n          descriptors[index] = item;\n        } else {\n          descriptors.push(item);\n        }\n        return descriptors;\n      });\n    },\n\n    remove: (viewTag: number) => {\n      sharableViewDescriptors.modify((descriptors: Descriptor[]) => {\n        'worklet';\n        const index = descriptors.findIndex(\n          (descriptor) => descriptor.tag === viewTag\n        );\n        if (index !== -1) {\n          descriptors.splice(index, 1);\n        }\n        return descriptors;\n      });\n    },\n  };\n  return data;\n}\n\nexport function makeViewsRefSet<T>(): ViewRefSet<T> {\n  const ref = useRef<ViewRefSet<T> | null>(null);\n  if (ref.current === null) {\n    const data: ViewRefSet<T> = {\n      items: new Set(),\n\n      add: (item: T) => {\n        if (data.items.has(item)) return;\n        data.items.add(item);\n      },\n\n      remove: (item: T) => {\n        data.items.delete(item);\n      },\n    };\n    ref.current = data;\n  }\n\n  return ref.current;\n}\n"],"mappings":"uJAAA,IAAAA,MAAA,CAAAC,OAAA,UACA,IAAAC,KAAA,CAAAD,OAAA,WAAoC,IAAAE,gCAAA,EAAAC,IAAA,wPAAAC,gCAAA,EAAAD,IAAA,6NAgB7B,QAAS,CAAAE,sBAAsBA,CAAA,CAAuB,CAC3D,GAAM,CAAAC,uBAAuB,CAAG,GAAAC,iBAAW,EAAe,EAAE,CAAC,CAC7D,GAAM,CAAAC,IAAwB,CAAG,CAC/BF,uBAAuB,CAAvBA,uBAAuB,CACvBG,GAAG,CAAG,SAAAA,IAAAC,IAAgB,CAAK,CACzBJ,uBAAuB,CAACK,MAAM,gBAAAC,SAAA,UAAAA,UAAEC,WAAyB,CAAK,CAE5D,GAAM,CAAAC,KAAK,CAAGD,WAAW,CAACE,SAAS,CAChC,SAAAC,UAAU,QAAK,CAAAA,UAAU,CAACC,GAAG,GAAKP,IAAI,CAACO,GAAG,GAC5C,CACD,GAAIH,KAAK,GAAK,CAAC,CAAC,CAAE,CAChBD,WAAW,CAACC,KAAK,CAAC,CAAGJ,IAAI,CAC3B,CAAC,IAAM,CACLG,WAAW,CAACK,IAAI,CAACR,IAAI,CAAC,CACxB,CACA,MAAO,CAAAG,WAAW,CACpB,CAAC,CAAAD,SAAA,CAAAO,SAAA,EAAAT,IAAA,CAbHA,IAAA,EAAAE,SAAA,CAAAQ,UAAA,CAAAlB,gCAAA,CAAAU,SAAA,CAAAS,aAAA,sBAAAT,SAAA,IAaG,CAAC,CACJ,CAAC,CAEDU,MAAM,CAAG,SAAAA,OAAAC,OAAe,CAAK,CAC3BjB,uBAAuB,CAACK,MAAM,gBAAAC,SAAA,UAAAA,UAAEC,WAAyB,CAAK,CAE5D,GAAM,CAAAC,KAAK,CAAGD,WAAW,CAACE,SAAS,CAChC,SAAAC,UAAU,QAAK,CAAAA,UAAU,CAACC,GAAG,GAAKM,OAAO,GAC3C,CACD,GAAIT,KAAK,GAAK,CAAC,CAAC,CAAE,CAChBD,WAAW,CAACW,MAAM,CAACV,KAAK,CAAE,CAAC,CAAC,CAC9B,CACA,MAAO,CAAAD,WAAW,CACpB,CAAC,CAAAD,SAAA,CAAAO,SAAA,EAAAI,OAAA,CA7C6BA,OAAA,EAAAX,SAAA,CAAAQ,UAAA,CAAAhB,gCAAA,CAAAQ,SAAA,CAAAS,aAAA,sBAAAT,SAAA,IA6C7B,CAAC,CACJ,CACF,CAAC,CACD,MAAO,CAAAJ,IAAI,CACb,CAEO,QAAS,CAAAiB,eAAeA,CAAA,CAAqB,CAClD,GAAM,CAAAC,GAAG,CAAG,GAAAC,aAAM,EAAuB,IAAI,CAAC,CAC9C,GAAID,GAAG,CAACE,OAAO,GAAK,IAAI,CAAE,CACxB,GAAM,CAAApB,IAAmB,CAAG,CAC1BqB,KAAK,CAAE,GAAI,CAAAC,GAAG,EAAE,CAEhBrB,GAAG,CAAG,SAAAA,IAAAC,IAAO,CAAK,CAChB,GAAIF,IAAI,CAACqB,KAAK,CAACE,GAAG,CAACrB,IAAI,CAAC,CAAE,OAC1BF,IAAI,CAACqB,KAAK,CAACpB,GAAG,CAACC,IAAI,CAAC,CACtB,CAAC,CAEDY,MAAM,CAAG,SAAAA,OAAAZ,IAAO,CAAK,CACnBF,IAAI,CAACqB,KAAK,CAACG,MAAM,CAACtB,IAAI,CAAC,CACzB,CACF,CAAC,CACDgB,GAAG,CAACE,OAAO,CAAGpB,IAAI,CACpB,CAEA,MAAO,CAAAkB,GAAG,CAACE,OAAO,CACpB"},"metadata":{},"sourceType":"script","externalDependencies":[]}