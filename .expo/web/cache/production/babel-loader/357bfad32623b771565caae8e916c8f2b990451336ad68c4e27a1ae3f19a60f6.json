{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.ProgressTransitionManager=void 0;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _threads=require(\"../../threads\");var _core=require(\"../../core\");var _reactNative=require(\"react-native\");function _createForOfIteratorHelperLoose(o,allowArrayLike){var it=typeof Symbol!==\"undefined\"&&o[Symbol.iterator]||o[\"@@iterator\"];if(it)return(it=it.call(o)).next.bind(it);if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length===\"number\"){if(it)o=it;var i=0;return function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};};}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,\"string\");return typeof key===\"symbol\"?key:String(key);}function _toPrimitive(input,hint){if(typeof input!==\"object\"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||\"default\");if(typeof res!==\"object\")return res;throw new TypeError(\"@@toPrimitive must return a primitive value.\");}return(hint===\"string\"?String:Number)(input);}var _worklet_733189383917_init_data={code:\"function anonymous(){const{viewTag,progressAnimation}=this.__closure;global.ProgressTransitionRegister.addProgressAnimation(viewTag,progressAnimation);}\"};var _worklet_15289183256234_init_data={code:\"function anonymous(){const{viewTag}=this.__closure;global.ProgressTransitionRegister.removeProgressAnimation(viewTag);}\"};var _worklet_7494210000180_init_data={code:\"function anonymous(event){const{lastProgressValue}=this.__closure;const progress=event.progress;if(progress===lastProgressValue){return;}lastProgressValue=progress;global.ProgressTransitionRegister.frame(progress);}\"};var _worklet_3584216964250_init_data={code:\"function anonymous(){global.ProgressTransitionRegister.onTransitionEnd();}\"};var _worklet_3552696675293_init_data={code:\"function anonymous(){global.ProgressTransitionRegister.onAndroidFinishTransitioning();}\"};var _worklet_16472804869484_init_data={code:\"function anonymous(){global.ProgressTransitionRegister.onTransitionEnd(true);}\"};var _worklet_3584216964250_init_data2={code:\"function anonymous(){global.ProgressTransitionRegister.onTransitionEnd();}\"};var ProgressTransitionManager=exports.ProgressTransitionManager=function(){function ProgressTransitionManager(){(0,_classCallCheck2.default)(this,ProgressTransitionManager);_defineProperty(this,\"_sharedElementCount\",0);_defineProperty(this,\"_eventHandler\",{isRegistered:false,onTransitionProgress:-1,onAppear:-1,onDisappear:-1,onSwipeDismiss:-1});}(0,_createClass2.default)(ProgressTransitionManager,[{key:\"addProgressAnimation\",value:function addProgressAnimation(viewTag,progressAnimation){(0,_threads.runOnUIImmediately)(function(){var anonymous=function anonymous(){global.ProgressTransitionRegister.addProgressAnimation(viewTag,progressAnimation);};anonymous.__closure={viewTag:viewTag,progressAnimation:progressAnimation};anonymous.__initData=_worklet_733189383917_init_data;anonymous.__workletHash=733189383917;return anonymous;}())();this.registerEventHandlers();}},{key:\"removeProgressAnimation\",value:function removeProgressAnimation(viewTag){this.unregisterEventHandlers();(0,_threads.runOnUIImmediately)(function(){var anonymous=function anonymous(){global.ProgressTransitionRegister.removeProgressAnimation(viewTag);};anonymous.__closure={viewTag:viewTag};anonymous.__initData=_worklet_15289183256234_init_data;anonymous.__workletHash=15289183256234;return anonymous;}())();}},{key:\"registerEventHandlers\",value:function registerEventHandlers(){this._sharedElementCount++;var eventHandler=this._eventHandler;if(!eventHandler.isRegistered){eventHandler.isRegistered=true;var eventPrefix=_reactNative.Platform.OS==='android'?'on':'top';var lastProgressValue=-1;eventHandler.onTransitionProgress=(0,_core.registerEventHandler)(function(){var anonymous=function anonymous(event){var progress=event.progress;if(progress===lastProgressValue){return;}lastProgressValue=progress;global.ProgressTransitionRegister.frame(progress);};anonymous.__closure={lastProgressValue:lastProgressValue};anonymous.__initData=_worklet_7494210000180_init_data;anonymous.__workletHash=7494210000180;return anonymous;}(),eventPrefix+'TransitionProgress');eventHandler.onAppear=(0,_core.registerEventHandler)(function(){var anonymous=function anonymous(){global.ProgressTransitionRegister.onTransitionEnd();};anonymous.__closure={};anonymous.__initData=_worklet_3584216964250_init_data;anonymous.__workletHash=3584216964250;return anonymous;}(),eventPrefix+'Appear');if(_reactNative.Platform.OS==='android'){eventHandler.onDisappear=(0,_core.registerEventHandler)(function(){var anonymous=function anonymous(){global.ProgressTransitionRegister.onAndroidFinishTransitioning();};anonymous.__closure={};anonymous.__initData=_worklet_3552696675293_init_data;anonymous.__workletHash=3552696675293;return anonymous;}(),'onFinishTransitioning');}else if(_reactNative.Platform.OS==='ios'){eventHandler.onDisappear=(0,_core.registerEventHandler)(function(){var anonymous=function anonymous(){global.ProgressTransitionRegister.onTransitionEnd(true);};anonymous.__closure={};anonymous.__initData=_worklet_16472804869484_init_data;anonymous.__workletHash=16472804869484;return anonymous;}(),'topDisappear');eventHandler.onSwipeDismiss=(0,_core.registerEventHandler)(function(){var anonymous=function anonymous(){global.ProgressTransitionRegister.onTransitionEnd();};anonymous.__closure={};anonymous.__initData=_worklet_3584216964250_init_data2;anonymous.__workletHash=3584216964250;return anonymous;}(),'topGestureCancel');}}}},{key:\"unregisterEventHandlers\",value:function unregisterEventHandlers(){this._sharedElementCount--;if(this._sharedElementCount===0){var eventHandler=this._eventHandler;eventHandler.isRegistered=false;if(eventHandler.onTransitionProgress!==-1){(0,_core.unregisterEventHandler)(eventHandler.onTransitionProgress);eventHandler.onTransitionProgress=-1;}if(eventHandler.onAppear!==-1){(0,_core.unregisterEventHandler)(eventHandler.onAppear);eventHandler.onAppear=-1;}if(eventHandler.onDisappear!==-1){(0,_core.unregisterEventHandler)(eventHandler.onDisappear);eventHandler.onDisappear=-1;}if(eventHandler.onSwipeDismiss!==-1){(0,_core.unregisterEventHandler)(eventHandler.onSwipeDismiss);eventHandler.onSwipeDismiss=-1;}}}}]);return ProgressTransitionManager;}();var _worklet_3135597834929_init_data={code:\"function createProgressTransitionRegister(){const progressAnimations=new Map();const snapshots=new Map();const currentTransitions=new Set();const toRemove=new Set();const progressTransitionManager={addProgressAnimation:function(viewTag,progressAnimation){progressAnimations.set(viewTag,progressAnimation);},removeProgressAnimation:function(viewTag){if(progressAnimations.size>1){toRemove.add(viewTag);}else{progressAnimations.delete(viewTag);}},onTransitionStart:function(viewTag,snapshot){snapshots.set(viewTag,snapshot);currentTransitions.add(viewTag);progressTransitionManager.frame(0);},frame:function(progress){for(const viewTag of currentTransitions){const progressAnimation=progressAnimations.get(viewTag);const snapshot=snapshots.get(viewTag);progressAnimation(viewTag,snapshot,progress);}},onAndroidFinishTransitioning:function(){if(toRemove.size>0){progressTransitionManager.onTransitionEnd();}},onTransitionEnd:function(){let removeViews=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;for(const viewTag of currentTransitions){_notifyAboutEnd(viewTag,removeViews);}currentTransitions.clear();snapshots.clear();if(toRemove.size>0){for(const viewTag of toRemove){progressAnimations.delete(viewTag);}toRemove.clear();}}};return progressTransitionManager;}\"};var createProgressTransitionRegister=function(){var createProgressTransitionRegister=function createProgressTransitionRegister(){var progressAnimations=new Map();var snapshots=new Map();var currentTransitions=new Set();var toRemove=new Set();var progressTransitionManager={addProgressAnimation:function addProgressAnimation(viewTag,progressAnimation){progressAnimations.set(viewTag,progressAnimation);},removeProgressAnimation:function removeProgressAnimation(viewTag){if(progressAnimations.size>1){toRemove.add(viewTag);}else{progressAnimations.delete(viewTag);}},onTransitionStart:function onTransitionStart(viewTag,snapshot){snapshots.set(viewTag,snapshot);currentTransitions.add(viewTag);progressTransitionManager.frame(0);},frame:function frame(progress){for(var _iterator=_createForOfIteratorHelperLoose(currentTransitions),_step;!(_step=_iterator()).done;){var viewTag=_step.value;var progressAnimation=progressAnimations.get(viewTag);var snapshot=snapshots.get(viewTag);progressAnimation(viewTag,snapshot,progress);}},onAndroidFinishTransitioning:function onAndroidFinishTransitioning(){if(toRemove.size>0){progressTransitionManager.onTransitionEnd();}},onTransitionEnd:function onTransitionEnd(){var removeViews=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;for(var _iterator2=_createForOfIteratorHelperLoose(currentTransitions),_step2;!(_step2=_iterator2()).done;){var _viewTag=_step2.value;_notifyAboutEnd(_viewTag,removeViews);}currentTransitions.clear();snapshots.clear();if(toRemove.size>0){for(var _iterator3=_createForOfIteratorHelperLoose(toRemove),_step3;!(_step3=_iterator3()).done;){var viewTag=_step3.value;progressAnimations.delete(viewTag);}toRemove.clear();}}};return progressTransitionManager;};createProgressTransitionRegister.__closure={};createProgressTransitionRegister.__initData=_worklet_3135597834929_init_data;createProgressTransitionRegister.__workletHash=3135597834929;return createProgressTransitionRegister;}();var _worklet_7089923520308_init_data={code:\"function anonymous(){const{createProgressTransitionRegister}=this.__closure;global.ProgressTransitionRegister=createProgressTransitionRegister();}\"};(0,_threads.runOnUIImmediately)(function(){var anonymous=function anonymous(){global.ProgressTransitionRegister=createProgressTransitionRegister();};anonymous.__closure={createProgressTransitionRegister:createProgressTransitionRegister};anonymous.__initData=_worklet_7089923520308_init_data;anonymous.__workletHash=7089923520308;return anonymous;}())();","map":{"version":3,"names":["_threads","require","_core","_reactNative","_createForOfIteratorHelperLoose","o","allowArrayLike","it","Symbol","iterator","call","next","bind","Array","isArray","_unsupportedIterableToArray","length","i","done","value","TypeError","minLen","_arrayLikeToArray","n","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","ProgressTransitionManager","exports","_classCallCheck2","default","_defineProperty","isRegistered","onTransitionProgress","onAppear","onDisappear","onSwipeDismiss","_createClass2","key","addProgressAnimation","viewTag","progressAnimation","runOnUIImmediately","anonymous","global","ProgressTransitionRegister","__closure","registerEventHandlers","removeProgressAnimation","unregisterEventHandlers","_sharedElementCount","eventHandler","_eventHandler","eventPrefix","Platform","OS","lastProgressValue","registerEventHandler","event","progress","frame","onTransitionEnd","__initData","_worklet_3584216964250_init_data","__workletHash","onAndroidFinishTransitioning","_worklet_3552696675293_init_data","_worklet_16472804869484_init_data","_worklet_3584216964250_init_data2","unregisterEventHandler","_worklet_3135597834929_init_data","code","createProgressTransitionRegister","progressAnimations","Map","snapshots","currentTransitions","Set","toRemove","progressTransitionManager","set","size","add","delete","onTransitionStart","snapshot","_iterator","_step","get","removeViews","arguments","undefined","_iterator2","_step2","_notifyAboutEnd","clear","_iterator3","_step3","_worklet_7089923520308_init_data"],"sources":["/Users/shayan/workspace/godfather/node_modules/react-native-reanimated/lib/module/reanimated2/layoutReanimation/sharedTransitions/ProgressTransitionManager.ts"],"sourcesContent":["import { runOnUIImmediately } from '../../threads';\nimport type { ProgressAnimation } from '../animationBuilder/commonTypes';\nimport { registerEventHandler, unregisterEventHandler } from '../../core';\nimport { Platform } from 'react-native';\n\ntype TransitionProgressEvent = {\n  closing: number;\n  goingForward: number;\n  eventName: string;\n  progress: number;\n  target: number;\n};\n\nexport class ProgressTransitionManager {\n  private _sharedElementCount = 0;\n  private _eventHandler = {\n    isRegistered: false,\n    onTransitionProgress: -1,\n    onAppear: -1,\n    onDisappear: -1,\n    onSwipeDismiss: -1,\n  };\n\n  public addProgressAnimation(\n    viewTag: number,\n    progressAnimation: ProgressAnimation\n  ) {\n    runOnUIImmediately(() => {\n      'worklet';\n      global.ProgressTransitionRegister.addProgressAnimation(\n        viewTag,\n        progressAnimation\n      );\n    })();\n    this.registerEventHandlers();\n  }\n\n  public removeProgressAnimation(viewTag: number) {\n    this.unregisterEventHandlers();\n    runOnUIImmediately(() => {\n      'worklet';\n      global.ProgressTransitionRegister.removeProgressAnimation(viewTag);\n    })();\n  }\n\n  private registerEventHandlers() {\n    this._sharedElementCount++;\n    const eventHandler = this._eventHandler;\n    if (!eventHandler.isRegistered) {\n      eventHandler.isRegistered = true;\n      const eventPrefix = Platform.OS === 'android' ? 'on' : 'top';\n      let lastProgressValue = -1;\n      eventHandler.onTransitionProgress = registerEventHandler(\n        (event: TransitionProgressEvent) => {\n          'worklet';\n          const progress = event.progress;\n          if (progress === lastProgressValue) {\n            // During screen transition, handler receives two events with the same progress\n            // value for both screens, but for modals, there is only one event. To optimize\n            // performance and avoid unnecessary worklet calls, let's skip the second event.\n            return;\n          }\n          lastProgressValue = progress;\n          global.ProgressTransitionRegister.frame(progress);\n        },\n        eventPrefix + 'TransitionProgress'\n      );\n      eventHandler.onAppear = registerEventHandler(() => {\n        'worklet';\n        global.ProgressTransitionRegister.onTransitionEnd();\n      }, eventPrefix + 'Appear');\n\n      if (Platform.OS === 'android') {\n        // onFinishTransitioning event is available only on Android and\n        // is used to handle closing modals\n        eventHandler.onDisappear = registerEventHandler(() => {\n          'worklet';\n          global.ProgressTransitionRegister.onAndroidFinishTransitioning();\n        }, 'onFinishTransitioning');\n      } else if (Platform.OS === 'ios') {\n        // topDisappear event is required to handle closing modals on iOS\n        eventHandler.onDisappear = registerEventHandler(() => {\n          'worklet';\n          global.ProgressTransitionRegister.onTransitionEnd(true);\n        }, 'topDisappear');\n        eventHandler.onSwipeDismiss = registerEventHandler(() => {\n          'worklet';\n          global.ProgressTransitionRegister.onTransitionEnd();\n        }, 'topGestureCancel');\n      }\n    }\n  }\n\n  private unregisterEventHandlers(): void {\n    this._sharedElementCount--;\n    if (this._sharedElementCount === 0) {\n      const eventHandler = this._eventHandler;\n      eventHandler.isRegistered = false;\n      if (eventHandler.onTransitionProgress !== -1) {\n        unregisterEventHandler(eventHandler.onTransitionProgress);\n        eventHandler.onTransitionProgress = -1;\n      }\n      if (eventHandler.onAppear !== -1) {\n        unregisterEventHandler(eventHandler.onAppear);\n        eventHandler.onAppear = -1;\n      }\n      if (eventHandler.onDisappear !== -1) {\n        unregisterEventHandler(eventHandler.onDisappear);\n        eventHandler.onDisappear = -1;\n      }\n      if (eventHandler.onSwipeDismiss !== -1) {\n        unregisterEventHandler(eventHandler.onSwipeDismiss);\n        eventHandler.onSwipeDismiss = -1;\n      }\n    }\n  }\n}\n\nfunction createProgressTransitionRegister() {\n  'worklet';\n  const progressAnimations = new Map<number, ProgressAnimation>();\n  const snapshots = new Map<number, any>();\n  const currentTransitions = new Set<number>();\n  const toRemove = new Set<number>();\n\n  const progressTransitionManager = {\n    addProgressAnimation: (\n      viewTag: number,\n      progressAnimation: ProgressAnimation\n    ) => {\n      progressAnimations.set(viewTag, progressAnimation);\n    },\n    removeProgressAnimation: (viewTag: number) => {\n      if (progressAnimations.size > 1) {\n        // Remove the animation config after the transition is finished\n        toRemove.add(viewTag);\n      } else {\n        progressAnimations.delete(viewTag);\n      }\n    },\n    onTransitionStart: (viewTag: number, snapshot: any) => {\n      snapshots.set(viewTag, snapshot);\n      currentTransitions.add(viewTag);\n      // set initial style for re-parented components\n      progressTransitionManager.frame(0);\n    },\n    frame: (progress: number) => {\n      for (const viewTag of currentTransitions) {\n        const progressAnimation = progressAnimations.get(viewTag);\n        const snapshot = snapshots.get(viewTag);\n        progressAnimation!(viewTag, snapshot, progress);\n      }\n    },\n    onAndroidFinishTransitioning: () => {\n      if (toRemove.size > 0) {\n        // it should be ran only on modal closing\n        progressTransitionManager.onTransitionEnd();\n      }\n    },\n    onTransitionEnd: (removeViews = false) => {\n      for (const viewTag of currentTransitions) {\n        _notifyAboutEnd(viewTag, removeViews);\n      }\n      currentTransitions.clear();\n      snapshots.clear();\n      if (toRemove.size > 0) {\n        for (const viewTag of toRemove) {\n          progressAnimations.delete(viewTag);\n        }\n        toRemove.clear();\n      }\n    },\n  };\n  return progressTransitionManager;\n}\n\nrunOnUIImmediately(() => {\n  'worklet';\n  global.ProgressTransitionRegister = createProgressTransitionRegister();\n})();\n\nexport type ProgressTransitionRegister = ReturnType<\n  typeof createProgressTransitionRegister\n>;\n"],"mappings":"2WAAA,IAAAA,QAAA,CAAAC,OAAA,kBAEA,IAAAC,KAAA,CAAAD,OAAA,eACA,IAAAE,YAAA,CAAAF,OAAA,iBAAuC,SAAAG,gCAAAC,CAAA,CAAAC,cAAA,MAAAC,EAAA,QAAAC,MAAA,gBAAAH,CAAA,CAAAG,MAAA,CAAAC,QAAA,GAAAJ,CAAA,kBAAAE,EAAA,QAAAA,EAAA,CAAAA,EAAA,CAAAG,IAAA,CAAAL,CAAA,GAAAM,IAAA,CAAAC,IAAA,CAAAL,EAAA,KAAAM,KAAA,CAAAC,OAAA,CAAAT,CAAA,IAAAE,EAAA,CAAAQ,2BAAA,CAAAV,CAAA,IAAAC,cAAA,EAAAD,CAAA,SAAAA,CAAA,CAAAW,MAAA,gBAAAT,EAAA,CAAAF,CAAA,CAAAE,EAAA,KAAAU,CAAA,wBAAAA,CAAA,EAAAZ,CAAA,CAAAW,MAAA,QAAAE,IAAA,cAAAA,IAAA,OAAAC,KAAA,CAAAd,CAAA,CAAAY,CAAA,kBAAAG,SAAA,oJAAAL,4BAAAV,CAAA,CAAAgB,MAAA,MAAAhB,CAAA,kBAAAA,CAAA,mBAAAiB,iBAAA,CAAAjB,CAAA,CAAAgB,MAAA,MAAAE,CAAA,CAAAC,MAAA,CAAAC,SAAA,CAAAC,QAAA,CAAAhB,IAAA,CAAAL,CAAA,EAAAsB,KAAA,UAAAJ,CAAA,aAAAlB,CAAA,CAAAuB,WAAA,CAAAL,CAAA,CAAAlB,CAAA,CAAAuB,WAAA,CAAAC,IAAA,IAAAN,CAAA,UAAAA,CAAA,gBAAAV,KAAA,CAAAiB,IAAA,CAAAzB,CAAA,KAAAkB,CAAA,2DAAAQ,IAAA,CAAAR,CAAA,SAAAD,iBAAA,CAAAjB,CAAA,CAAAgB,MAAA,YAAAC,kBAAAU,GAAA,CAAAC,GAAA,KAAAA,GAAA,QAAAA,GAAA,CAAAD,GAAA,CAAAhB,MAAA,CAAAiB,GAAA,CAAAD,GAAA,CAAAhB,MAAA,SAAAC,CAAA,GAAAiB,IAAA,KAAArB,KAAA,CAAAoB,GAAA,EAAAhB,CAAA,CAAAgB,GAAA,CAAAhB,CAAA,GAAAiB,IAAA,CAAAjB,CAAA,EAAAe,GAAA,CAAAf,CAAA,SAAAiB,IAAA,E,yvDAU1B,CAAAC,yBAAyB,CAAAC,OAAA,CAAAD,yBAAA,YAAC,SAAAA,0BAAA,KAAAE,gBAAA,CAAAC,OAAA,OAAAH,yBAAA,EAAAI,eAAA,4BACP,CAAC,EAAAA,eAAA,sBACP,CACtBC,YAAY,CAAE,KAAK,CACnBC,oBAAoB,CAAE,CAAC,CAAC,CACxBC,QAAQ,CAAE,CAAC,CAAC,CACZC,WAAW,CAAE,CAAC,CAAC,CACfC,cAAc,CAAE,CAAC,CACnB,CAAC,MAAAC,aAAA,CAAAP,OAAA,EAAAH,yBAAA,GAAAW,GAAA,wBAAA3B,KAAA,CAEM,SAAA4B,qBACLC,OAAe,CACfC,iBAAoC,CACpC,CACA,GAAAC,2BAAkB,iBAAAC,SAAA,UAAAA,UAAA,CAAO,CAEvBC,MAAM,CAACC,0BAA0B,CAACN,oBAAoB,CACpDC,OAAO,CACPC,iBAAiB,CAClB,CACH,CAAC,CAAAE,SAAA,CAAAG,SAAA,EAAAN,OAAA,C,2JAAA,CAAC,EAAE,CACJ,IAAI,CAACO,qBAAqB,EAAE,CAC9B,IAAAT,GAAA,2BAAA3B,KAAA,CAEO,SAAAqC,wBAAwBR,OAAe,CAAE,CAC9C,IAAI,CAACS,uBAAuB,EAAE,CAC9B,GAAAP,2BAAkB,iBAAAC,SAAA,UAAAA,UAAA,CAAO,CAEvBC,MAAM,CAACC,0BAA0B,CAACG,uBAAuB,CAACR,OAAO,CAAC,CACpE,CAAC,CAAAG,SAAA,CAAAG,SAAA,EAAAN,OAAA,C,2HAAA,CAAC,EAAE,CACN,IAAAF,GAAA,yBAAA3B,KAAA,CAEQ,SAAAoC,sBAAA,CAAwB,CAC9B,IAAI,CAACG,mBAAmB,EAAE,CAC1B,GAAM,CAAAC,YAAY,CAAG,IAAI,CAACC,aAAa,CACvC,GAAI,CAACD,YAAY,CAACnB,YAAY,CAAE,CAC9BmB,YAAY,CAACnB,YAAY,CAAG,IAAI,CAChC,GAAM,CAAAqB,WAAW,CAAGC,qBAAQ,CAACC,EAAE,GAAK,SAAS,CAAG,IAAI,CAAG,KAAK,CAC5D,GAAI,CAAAC,iBAAiB,CAAG,CAAC,CAAC,CAC1BL,YAAY,CAAClB,oBAAoB,CAAG,GAAAwB,0BAAoB,iBAAAd,SAAA,UAAAA,UACrDe,KAA8B,CAAK,CAElC,GAAM,CAAAC,QAAQ,CAAGD,KAAK,CAACC,QAAQ,CAC/B,GAAIA,QAAQ,GAAKH,iBAAiB,CAAE,CAIlC,OACF,CACAA,iBAAiB,CAAGG,QAAQ,CAC5Bf,MAAM,CAACC,0BAA0B,CAACe,KAAK,CAACD,QAAQ,CAAC,CACnD,CAAC,CAAAhB,SAAA,CAAAG,SAAA,EAAAU,iBAAA,C,oIACDH,WAAW,CAAG,oBAAoB,CACnC,CACDF,YAAY,CAACjB,QAAQ,CAAG,GAAAuB,0BAAoB,iBAAAd,SAAA,UAAAA,UAAA,CAAO,CAEjDC,MAAM,CAACC,0BAA0B,CAACgB,eAAe,EAAE,CACrD,CAAC,CAAAlB,SAAA,CAAAG,SAAA,IAAAH,SAAA,CAAAmB,UAAA,CAAAC,gCAAA,CAAApB,SAAA,CAAAqB,aAAA,sBAAArB,SAAA,KAAEU,WAAW,CAAG,QAAQ,CAAC,CAE1B,GAAIC,qBAAQ,CAACC,EAAE,GAAK,SAAS,CAAE,CAG7BJ,YAAY,CAAChB,WAAW,CAAG,GAAAsB,0BAAoB,iBAAAd,SAAA,UAAAA,UAAA,CAAO,CAEpDC,MAAM,CAACC,0BAA0B,CAACoB,4BAA4B,EAAE,CAClE,CAAC,CAAAtB,SAAA,CAAAG,SAAA,IAAAH,SAAA,CAAAmB,UAAA,CAAAI,gCAAA,CAAAvB,SAAA,CAAAqB,aAAA,sBAAArB,SAAA,KAAE,uBAAuB,CAAC,CAC7B,CAAC,IAAM,IAAIW,qBAAQ,CAACC,EAAE,GAAK,KAAK,CAAE,CAEhCJ,YAAY,CAAChB,WAAW,CAAG,GAAAsB,0BAAoB,iBAAAd,SAAA,UAAAA,UAAA,CAAO,CAEpDC,MAAM,CAACC,0BAA0B,CAACgB,eAAe,CAAC,IAAI,CAAC,CACzD,CAAC,CAAAlB,SAAA,CAAAG,SAAA,IAAAH,SAAA,CAAAmB,UAAA,CAAAK,iCAAA,CAAAxB,SAAA,CAAAqB,aAAA,uBAAArB,SAAA,KAAE,cAAc,CAAC,CAClBQ,YAAY,CAACf,cAAc,CAAG,GAAAqB,0BAAoB,iBAAAd,SAAA,UAAAA,UAAA,CAAO,CAEvDC,MAAM,CAACC,0BAA0B,CAACgB,eAAe,EAAE,CACrD,CAAC,CAAAlB,SAAA,CAAAG,SAAA,IAAAH,SAAA,CAAAmB,UAAA,CAAAM,iCAAA,CAAAzB,SAAA,CAAAqB,aAAA,sBAAArB,SAAA,KAAE,kBAAkB,CAAC,CACxB,CACF,CACF,IAAAL,GAAA,2BAAA3B,KAAA,CAEQ,SAAAsC,wBAAA,CAAgC,CACtC,IAAI,CAACC,mBAAmB,EAAE,CAC1B,GAAI,IAAI,CAACA,mBAAmB,GAAK,CAAC,CAAE,CAClC,GAAM,CAAAC,YAAY,CAAG,IAAI,CAACC,aAAa,CACvCD,YAAY,CAACnB,YAAY,CAAG,KAAK,CACjC,GAAImB,YAAY,CAAClB,oBAAoB,GAAK,CAAC,CAAC,CAAE,CAC5C,GAAAoC,4BAAsB,EAAClB,YAAY,CAAClB,oBAAoB,CAAC,CACzDkB,YAAY,CAAClB,oBAAoB,CAAG,CAAC,CAAC,CACxC,CACA,GAAIkB,YAAY,CAACjB,QAAQ,GAAK,CAAC,CAAC,CAAE,CAChC,GAAAmC,4BAAsB,EAAClB,YAAY,CAACjB,QAAQ,CAAC,CAC7CiB,YAAY,CAACjB,QAAQ,CAAG,CAAC,CAAC,CAC5B,CACA,GAAIiB,YAAY,CAAChB,WAAW,GAAK,CAAC,CAAC,CAAE,CACnC,GAAAkC,4BAAsB,EAAClB,YAAY,CAAChB,WAAW,CAAC,CAChDgB,YAAY,CAAChB,WAAW,CAAG,CAAC,CAAC,CAC/B,CACA,GAAIgB,YAAY,CAACf,cAAc,GAAK,CAAC,CAAC,CAAE,CACtC,GAAAiC,4BAAsB,EAAClB,YAAY,CAACf,cAAc,CAAC,CACnDe,YAAY,CAACf,cAAc,CAAG,CAAC,CAAC,CAClC,CACF,CACF,YAAAT,yBAAA,SAAA2C,gCAAA,EAAAC,IAAA,uwCAGO,CAAAC,gCAAgC,gBAAAA,gCAAA,UAAAA,iCAAA,CAAG,CAE1C,GAAM,CAAAC,kBAAkB,CAAG,GAAI,CAAAC,GAAG,EAA6B,CAC/D,GAAM,CAAAC,SAAS,CAAG,GAAI,CAAAD,GAAG,EAAe,CACxC,GAAM,CAAAE,kBAAkB,CAAG,GAAI,CAAAC,GAAG,EAAU,CAC5C,GAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAD,GAAG,EAAU,CAElC,GAAM,CAAAE,yBAAyB,CAAG,CAChCxC,oBAAoB,CAAE,SAAAA,qBACpBC,OAAe,CACfC,iBAAoC,CACjC,CACHgC,kBAAkB,CAACO,GAAG,CAACxC,OAAO,CAAEC,iBAAiB,CAAC,CACpD,CAAC,CACDO,uBAAuB,CAAG,SAAAA,wBAAAR,OAAe,CAAK,CAC5C,GAAIiC,kBAAkB,CAACQ,IAAI,CAAG,CAAC,CAAE,CAE/BH,QAAQ,CAACI,GAAG,CAAC1C,OAAO,CAAC,CACvB,CAAC,IAAM,CACLiC,kBAAkB,CAACU,MAAM,CAAC3C,OAAO,CAAC,CACpC,CACF,CAAC,CACD4C,iBAAiB,CAAE,SAAAA,kBAAC5C,OAAe,CAAE6C,QAAa,CAAK,CACrDV,SAAS,CAACK,GAAG,CAACxC,OAAO,CAAE6C,QAAQ,CAAC,CAChCT,kBAAkB,CAACM,GAAG,CAAC1C,OAAO,CAAC,CAE/BuC,yBAAyB,CAACnB,KAAK,CAAC,CAAC,CAAC,CACpC,CAAC,CACDA,KAAK,CAAG,SAAAA,MAAAD,QAAgB,CAAK,CAC3B,QAAA2B,SAAA,CAAA1F,+BAAA,CAAsBgF,kBAAkB,EAAAW,KAAA,GAAAA,KAAA,CAAAD,SAAA,IAAA5E,IAAA,EAAE,IAA/B,CAAA8B,OAAO,CAAA+C,KAAA,CAAA5E,KAAA,CAChB,GAAM,CAAA8B,iBAAiB,CAAGgC,kBAAkB,CAACe,GAAG,CAAChD,OAAO,CAAC,CACzD,GAAM,CAAA6C,QAAQ,CAAGV,SAAS,CAACa,GAAG,CAAChD,OAAO,CAAC,CACvCC,iBAAiB,CAAED,OAAO,CAAE6C,QAAQ,CAAE1B,QAAQ,CAAC,CACjD,CACF,CAAC,CACDM,4BAA4B,CAAE,SAAAA,6BAAA,CAAM,CAClC,GAAIa,QAAQ,CAACG,IAAI,CAAG,CAAC,CAAE,CAErBF,yBAAyB,CAAClB,eAAe,EAAE,CAC7C,CACF,CAAC,CACDA,eAAe,CAAE,SAAAA,gBAAA,CAAyB,IAAxB,CAAA4B,WAAW,CAAAC,SAAA,CAAAlF,MAAA,IAAAkF,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG,KAAK,CACnC,QAAAE,UAAA,CAAAhG,+BAAA,CAAsBgF,kBAAkB,EAAAiB,MAAA,GAAAA,MAAA,CAAAD,UAAA,IAAAlF,IAAA,EAAE,IAA/B,CAAA8B,QAAO,CAAAqD,MAAA,CAAAlF,KAAA,CAChBmF,eAAe,CAACtD,QAAO,CAAEiD,WAAW,CAAC,CACvC,CACAb,kBAAkB,CAACmB,KAAK,EAAE,CAC1BpB,SAAS,CAACoB,KAAK,EAAE,CACjB,GAAIjB,QAAQ,CAACG,IAAI,CAAG,CAAC,CAAE,CACrB,QAAAe,UAAA,CAAApG,+BAAA,CAAsBkF,QAAQ,EAAAmB,MAAA,GAAAA,MAAA,CAAAD,UAAA,IAAAtF,IAAA,EAAE,IAArB,CAAA8B,OAAO,CAAAyD,MAAA,CAAAtF,KAAA,CAChB8D,kBAAkB,CAACU,MAAM,CAAC3C,OAAO,CAAC,CACpC,CACAsC,QAAQ,CAACiB,KAAK,EAAE,CAClB,CACF,CACF,CAAC,CACD,MAAO,CAAAhB,yBAAyB,CAClC,EAAAP,gCAAA,CAAA1B,SAAA,IAAA0B,gCAAA,CAAAV,UAAA,CAAAQ,gCAAA,CAAAE,gCAAA,CAAAR,aAAA,sBAAAQ,gCAAA,SAAA0B,gCAAA,EAAA3B,IAAA,uJAEA,GAAA7B,2BAAkB,iBAAAC,SAAA,UAAAA,UAAA,CAAO,CAEvBC,MAAM,CAACC,0BAA0B,CAAG2B,gCAAgC,EAAE,CACxE,CAAC,CAAA7B,SAAA,CAAAG,SAAA,EAAA0B,gCAAA,C,kJAAA,CAAC,EAAE"},"metadata":{},"sourceType":"script","externalDependencies":[]}